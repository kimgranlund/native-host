---
import SidebarLayout from '../../layouts/SidebarLayout.astro';

const codeExamples = {
  events: `&lt;ui-listbox id="my-listbox"&gt;
  &lt;ui-option value="red"&gt;Red&lt;/ui-option&gt;
  &lt;ui-option value="green"&gt;Green&lt;/ui-option&gt;
  &lt;ui-option value="blue"&gt;Blue&lt;/ui-option&gt;
&lt;/ui-listbox&gt;

&lt;script&gt;
  myListbox.addEventListener('ui-change', (e) =&gt; {
    console.log(e.detail.value);
  });
&lt;/script&gt;`,
};
---
<SidebarLayout title="ui-listbox">
  <main>
<h1>&lt;ui-listbox&gt; + &lt;ui-option&gt;</h1>
    <p style="color: var(--neutral-ink-muted); font-size: 0.875rem; margin-bottom: 1.5rem;">
      Listbox with roving focus, keyboard navigation, and selection management.
    </p>

    <!-- ── Basic ── -->

    <h2>Basic Listbox</h2>
    <div class="layout-section" intent="neutral">
      <div class="layout-grid">
        <div class="layout-col">
          <span class="layout-col-label">Default (single select)</span>
          <ui-listbox id="basic-listbox" variant="secondary">
            <ui-option value="apple">Apple</ui-option>
            <ui-option value="banana">Banana</ui-option>
            <ui-option value="cherry">Cherry</ui-option>
            <ui-option value="date">Date</ui-option>
            <ui-option value="elderberry">Elderberry</ui-option>
          </ui-listbox>
          <div>Selected: <span class="value-display" id="basic-value">none</span></div>
        </div>

        <div class="layout-col">
          <span class="layout-col-label">With disabled option</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Available</ui-option>
            <ui-option value="b" disabled>Disabled</ui-option>
            <ui-option value="c">Available</ui-option>
            <ui-option value="d" disabled>Disabled</ui-option>
            <ui-option value="e">Available</ui-option>
          </ui-listbox>
        </div>

        <div class="layout-col">
          <span class="layout-col-label">Pre-selected</span>
          <ui-listbox id="preselected-listbox" variant="secondary">
            <ui-option value="small">Small</ui-option>
            <ui-option value="medium">Medium</ui-option>
            <ui-option value="large">Large</ui-option>
          </ui-listbox>
        </div>
      </div>
      <pre class="layout-code"><code>&lt;ui-listbox&gt;
  &lt;ui-option value="apple"&gt;Apple&lt;/ui-option&gt;
  &lt;ui-option value="banana"&gt;Banana&lt;/ui-option&gt;
  &lt;ui-option value="cherry"&gt;Cherry&lt;/ui-option&gt;
  &lt;ui-option value="date" disabled&gt;Date&lt;/ui-option&gt;
&lt;/ui-listbox&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Grouped Options ── -->

    <h2>Grouped Options</h2>
    <div class="layout-section">
      <div class="layout-grid">
        <div class="layout-col">
          <span class="layout-col-label">With icons</span>
          <ui-listbox variant="ghost" size="sm">
            <ui-option-group>
              <ui-option-group-header><ui-icon name="house"></ui-icon> Getting Started</ui-option-group-header>
              <ui-option value="install">Installation</ui-option>
              <ui-option value="structure">Project Structure</ui-option>
            </ui-option-group>
            <ui-option-group>
              <ui-option-group-header><ui-icon name="rocket-launch"></ui-icon> Build Your Application</ui-option-group-header>
              <ui-option value="routing">Routing</ui-option>
              <ui-option value="data">Data Fetching</ui-option>
              <ui-option value="caching">Caching</ui-option>
              <ui-option value="styling">Styling</ui-option>
              <ui-option value="optimizing">Optimizing</ui-option>
            </ui-option-group>
            <ui-option-group>
              <ui-option-group-header><ui-icon name="book-open"></ui-icon> Reference</ui-option-group-header>
              <ui-option value="api">API Reference</ui-option>
              <ui-option value="config">Configuration</ui-option>
              <ui-option value="examples">Examples</ui-option>
            </ui-option-group>
          </ui-listbox>
        </div>

        <div class="layout-col">
          <span class="layout-col-label">Without icons</span>
          <ui-listbox variant="ghost" size="sm">
            <ui-option-group>
              <ui-option-group-header>Fruits</ui-option-group-header>
              <ui-option value="apple">Apple</ui-option>
              <ui-option value="banana">Banana</ui-option>
              <ui-option value="cherry">Cherry</ui-option>
            </ui-option-group>
            <ui-option-group>
              <ui-option-group-header>Vegetables</ui-option-group-header>
              <ui-option value="carrot">Carrot</ui-option>
              <ui-option value="broccoli">Broccoli</ui-option>
              <ui-option value="spinach">Spinach</ui-option>
            </ui-option-group>
          </ui-listbox>
        </div>
      </div>
      <pre class="layout-code"><code>&lt;ui-listbox variant="ghost" size="sm"&gt;
  &lt;ui-option-group&gt;
    &lt;ui-option-group-header&gt;
      &lt;ui-icon name="house"&gt;&lt;/ui-icon&gt; Getting Started
    &lt;/ui-option-group-header&gt;
    &lt;ui-option value="install"&gt;Installation&lt;/ui-option&gt;
    &lt;ui-option value="structure"&gt;Project Structure&lt;/ui-option&gt;
  &lt;/ui-option-group&gt;
&lt;/ui-listbox&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Sizes ── -->

    <h2>Sizes</h2>
    <div class="layout-section">
      <div class="layout-grid">
        <div class="layout-col">
          <span class="layout-col-label">xs</span>
          <ui-listbox size="xs" variant="secondary">
            <ui-option value="1">Option One</ui-option>
            <ui-option value="2">Option Two</ui-option>
            <ui-option value="3">Option Three</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">sm</span>
          <ui-listbox size="sm" variant="secondary">
            <ui-option value="1">Option One</ui-option>
            <ui-option value="2">Option Two</ui-option>
            <ui-option value="3">Option Three</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">md</span>
          <ui-listbox size="md" variant="secondary">
            <ui-option value="1">Option One</ui-option>
            <ui-option value="2">Option Two</ui-option>
            <ui-option value="3">Option Three</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">lg</span>
          <ui-listbox size="lg" variant="secondary">
            <ui-option value="1">Option One</ui-option>
            <ui-option value="2">Option Two</ui-option>
            <ui-option value="3">Option Three</ui-option>
          </ui-listbox>
        </div>
      </div>
      <pre class="layout-code"><code>&lt;ui-listbox size="sm"&gt;...&lt;/ui-listbox&gt;
&lt;ui-listbox size="md"&gt;...&lt;/ui-listbox&gt;
&lt;ui-listbox size="lg"&gt;...&lt;/ui-listbox&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Intents ── -->

    <h2>Intents</h2>
    <div class="layout-section" size="sm">
      <div class="layout-grid">
        <div class="layout-col">
          <span class="layout-col-label">Neutral</span>
          <ui-listbox intent="neutral" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">Accent</span>
          <ui-listbox intent="accent" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">Danger</span>
          <ui-listbox intent="danger" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
      </div>
    </div>

    <!-- ── Variants ── -->

    <h2>Variants</h2>
    <div class="layout-section" size="sm">
      <div class="layout-grid">
        <div class="layout-col">
          <span class="layout-col-label">primary</span>
          <ui-listbox variant="primary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">secondary</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">outline</span>
          <ui-listbox variant="outline">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">ghost</span>
          <ui-listbox variant="ghost">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">default</span>
          <ui-listbox variant="default">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
      </div>
    </div>

    <!-- ── Density ── -->

    <h2>Density</h2>
    <div class="layout-section" size="md">
      <div class="layout-grid">
        <div class="layout-col" density="loose">
          <span class="layout-col-label">loose</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col" density="default">
          <span class="layout-col-label">default</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col" density="compact">
          <span class="layout-col-label">compact</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
      </div>
    </div>

    <!-- ── Radius ── -->

    <h2>Radius</h2>
    <div class="layout-section" size="sm">
      <div class="layout-grid">
        <div class="layout-col" radius="sharp">
          <span class="layout-col-label">sharp</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col" radius="default">
          <span class="layout-col-label">default</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col" radius="round">
          <span class="layout-col-label">round</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
      </div>
    </div>

    <!-- ── Cascading ── -->

    <h2>Cascading</h2>
    <div class="layout-section">
      <h3>Parent size="md", child overrides</h3>
      <div class="layout-grid" size="md" intent="accent">
        <div class="layout-col">
          <span class="layout-col-label">Inherited md</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">Override xs</span>
          <ui-listbox size="xs" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
          </ui-listbox>
        </div>
        <div class="layout-col">
          <span class="layout-col-label">Override lg</span>
          <ui-listbox size="lg" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
          </ui-listbox>
        </div>
      </div>

      <h3>Section cascading all attributes</h3>
      <section size="sm" density="compact" radius="round" intent="accent">
        <div class="layout-grid">
          <div class="layout-col">
            <span class="layout-col-label">All inherited</span>
            <ui-listbox variant="secondary">
              <ui-option value="a">Option A</ui-option>
              <ui-option value="b">Option B</ui-option>
              <ui-option value="c">Option C</ui-option>
            </ui-listbox>
          </div>
          <div class="layout-col">
            <span class="layout-col-label">All inherited (outline)</span>
            <ui-listbox variant="outline">
              <ui-option value="a">Option A</ui-option>
              <ui-option value="b">Option B</ui-option>
              <ui-option value="c">Option C</ui-option>
            </ui-listbox>
          </div>
        </div>
      </section>
    </div>

    <!-- ── Events ── -->

    <h2>Events</h2>
    <div class="layout-section" size="sm">
      <ui-listbox id="event-listbox" variant="secondary" style="max-width: 220px;">
        <ui-option value="red">Red</ui-option>
        <ui-option value="green">Green</ui-option>
        <ui-option value="blue">Blue</ui-option>
        <ui-option value="yellow">Yellow</ui-option>
      </ui-listbox>
      <div class="log" id="event-log"></div>
      <pre class="layout-code"><code set:html={codeExamples.events} /><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Debug States (force-*) ── -->

    <h2>Debug States (<code>force-*</code>)</h2>
    <div class="layout-section" size="sm">
      <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin: 0 0 1rem;">
        Attribute-driven pseudo-state overrides for DevTools debugging and visual testing. Applied to individual <code>ui-option</code> elements.
      </p>
      <ui-listbox variant="secondary" style="max-width: 220px;">
        <ui-option value="hover" force-hover>Force hover</ui-option>
        <ui-option value="active" force-active>Force active</ui-option>
        <ui-option value="focus" force-focus-visible>Force focus-visible</ui-option>
        <ui-option value="normal">Normal</ui-option>
      </ui-listbox>
    </div>
  </main>

  <script>
import '../../scripts/copy-buttons';
import { logPrepend } from '../../scripts/event-log';
// Basic listbox value tracking
      const basicListbox = document.getElementById('basic-listbox');
      const basicValue = document.getElementById('basic-value');

      basicListbox.addEventListener('ui-change', (e) => {
        basicValue.textContent = e.detail.value;
      });

      // Pre-select "medium"
      const preListbox = document.getElementById('preselected-listbox');
      preListbox.addEventListener('ui-change', () => {});
      // Programmatic select after registration
      requestAnimationFrame(() => {
        preListbox.controller.select('medium');
      });

      // Event logging
      const eventListbox = document.getElementById('event-listbox');
      const eventLog = document.getElementById('event-log');
      let eventCount = 0;

      eventListbox.addEventListener('ui-select', (e) => {
        eventCount++;
        logPrepend(eventLog, `#${eventCount} ui-select — value: "${e.detail.value}", label: "${e.detail.label}"`);
      });

      eventListbox.addEventListener('ui-change', (e) => {
        eventCount++;
        logPrepend(eventLog, `#${eventCount} ui-change — value: "${e.detail.value}", label: "${e.detail.label}"`);
      });
  </script>
  <style is:global>
    .value-display {
      font-family: ui-monospace, monospace;
      font-size: 0.75rem;
      color: var(--accent-ink);
      background: var(--accent-panel);
      border-radius: 0.25rem;
      padding: 0.25rem 0.5rem;
      display: inline-block;
    }

    /* ── Code Blocks ── */
</style>

</SidebarLayout>
