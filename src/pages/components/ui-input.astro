---
import SidebarLayout from '../../layouts/SidebarLayout.astro';

const codeExamples = {
  events: `&lt;ui-input id="event-input" placeholder="Type to see events..."&gt;&lt;/ui-input&gt;

&lt;script&gt;
  const input = document.getElementById('event-input');
  input.addEventListener('ui-input', (e) =&gt; {
    console.log('ui-input', e.detail.value);
  });
  input.addEventListener('ui-change', (e) =&gt; {
    console.log('ui-change', e.detail.value);
  });
&lt;/script&gt;`,
};
---
<SidebarLayout title="ui-input">
  <main>
<h1>&lt;ui-input&gt;</h1>
    <p style="color: var(--neutral-ink-muted); font-size: 0.875rem; margin-bottom: 1.5rem;">
      Form-associated contenteditable custom element with token/variant/size cascade. No internal native elements.
    </p>

    <!-- ── Variants ── -->

    <h2>Variants</h2>
    <div class="layout-section" size="sm">
      <div class="layout-row">
        <span class="layout-label">outline</span>
        <ui-input variant="outline" placeholder="Outline input"></ui-input>
      </div>
      <div class="layout-row">
        <span class="layout-label">default</span>
        <ui-input variant="default" placeholder="Default input"></ui-input>
      </div>
      <div class="layout-row">
        <span class="layout-label">ghost</span>
        <ui-input variant="ghost" placeholder="Ghost input"></ui-input>
      </div>
      <pre class="layout-code"><code>&lt;ui-input variant="outline" placeholder="Outline input"&gt;&lt;/ui-input&gt;
&lt;ui-input variant="default" placeholder="Default input"&gt;&lt;/ui-input&gt;
&lt;ui-input variant="ghost" placeholder="Ghost input"&gt;&lt;/ui-input&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Sizes ── -->

    <h2>Sizes</h2>
    <div class="layout-section">
      <div class="layout-row">
        <span class="layout-label">xs</span>
        <ui-input size="xs" placeholder="Extra small"></ui-input>
      </div>
      <div class="layout-row">
        <span class="layout-label">sm</span>
        <ui-input size="sm" placeholder="Small"></ui-input>
      </div>
      <div class="layout-row">
        <span class="layout-label">md</span>
        <ui-input size="md" placeholder="Medium"></ui-input>
      </div>
      <div class="layout-row">
        <span class="layout-label">lg</span>
        <ui-input size="lg" placeholder="Large"></ui-input>
      </div>
      <div class="layout-row">
        <span class="layout-label">xl</span>
        <ui-input size="xl" placeholder="Extra large"></ui-input>
      </div>
      <pre class="layout-code"><code>&lt;ui-input size="sm" placeholder="Small"&gt;&lt;/ui-input&gt;
&lt;ui-input size="md" placeholder="Medium"&gt;&lt;/ui-input&gt;
&lt;ui-input size="lg" placeholder="Large"&gt;&lt;/ui-input&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Intents ── -->

    <h2>Intents</h2>
    <div class="layout-section" size="sm">
      <div class="layout-row">
        <ui-input intent="neutral" placeholder="Neutral"></ui-input>
        <ui-input intent="accent" placeholder="Accent"></ui-input>
        <ui-input intent="info" placeholder="Info"></ui-input>
      </div>
      <div class="layout-row">
        <ui-input intent="success" placeholder="Success"></ui-input>
        <ui-input intent="warning" placeholder="Warning"></ui-input>
        <ui-input intent="danger" placeholder="Danger"></ui-input>
      </div>
    </div>

    <!-- ── Disabled & Readonly ── -->

    <h2>Disabled &amp; Readonly</h2>
    <div class="layout-section" size="sm">
      <div class="layout-row">
        <span class="layout-label">disabled</span>
        <ui-input disabled placeholder="Disabled"></ui-input>
      </div>
      <div class="layout-row">
        <span class="layout-label">readonly</span>
        <ui-input readonly value="Read-only value"></ui-input>
      </div>
    </div>

    <!-- ── With Icons (Slots) ── -->

    <h2>With Icons</h2>
    <div class="layout-section" size="sm">
      <h3>Leading icon</h3>
      <div class="layout-row">
        <ui-input placeholder="Search...">
          <ui-icon name="magnifying-glass" slot="leading"></ui-icon>
        </ui-input>
        <ui-input placeholder="Email address">
          <ui-icon name="envelope" slot="leading"></ui-icon>
        </ui-input>
      </div>

      <h3>Trailing icon</h3>
      <div class="layout-row">
        <ui-input placeholder="Password">
          <ui-icon name="lock" slot="leading"></ui-icon>
          <ui-icon name="eye" slot="trailing"></ui-icon>
        </ui-input>
      </div>

      <h3>Leading + Trailing</h3>
      <div class="layout-row">
        <ui-input placeholder="Search users...">
          <ui-icon name="magnifying-glass" slot="leading"></ui-icon>
          <ui-icon name="user" slot="trailing"></ui-icon>
        </ui-input>
      </div>
      <pre class="layout-code"><code>&lt;ui-input placeholder="Search..."&gt;
  &lt;ui-icon name="magnifying-glass" slot="leading"&gt;&lt;/ui-icon&gt;
&lt;/ui-input&gt;

&lt;ui-input placeholder="Password"&gt;
  &lt;ui-icon name="lock" slot="leading"&gt;&lt;/ui-icon&gt;
  &lt;ui-icon name="eye" slot="trailing"&gt;&lt;/ui-icon&gt;
&lt;/ui-input&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Ghost Composability ── -->

    <h2>Ghost — Composability</h2>
    <div class="layout-section" size="sm">
      <h3>Ghost input standalone</h3>
      <div class="layout-row">
        <ui-input variant="ghost" placeholder="Ghost input — no chrome"></ui-input>
      </div>

      <h3>Ghost input inside a container</h3>
      <div style="background: var(--neutral-panel); border: 1px solid var(--neutral-border-muted); border-radius: 0.5rem; padding: 0.25rem 0.5rem; display: flex; align-items: center; gap: 0.5rem;">
        <ui-icon name="magnifying-glass" style="color: var(--neutral-ink-muted);"></ui-icon>
        <ui-input variant="ghost" placeholder="Search inside container..." style="flex: 1;"></ui-input>
      </div>
    </div>

    <!-- ── Density ── -->

    <h2>Density</h2>
    <div class="layout-section">
      <h3>xs</h3>
      <div class="layout-row" size="xs" density="compact">
        <span class="layout-label">compact</span>
        <ui-input placeholder="Compact"></ui-input>
      </div>
      <div class="layout-row" size="xs" density="default">
        <span class="layout-label">default</span>
        <ui-input placeholder="Default"></ui-input>
      </div>
      <div class="layout-row" size="xs" density="loose">
        <span class="layout-label">loose</span>
        <ui-input placeholder="Loose"></ui-input>
      </div>

      <h3>sm</h3>
      <div class="layout-row" size="sm" density="compact">
        <span class="layout-label">compact</span>
        <ui-input placeholder="Compact"></ui-input>
      </div>
      <div class="layout-row" size="sm" density="default">
        <span class="layout-label">default</span>
        <ui-input placeholder="Default"></ui-input>
      </div>
      <div class="layout-row" size="sm" density="loose">
        <span class="layout-label">loose</span>
        <ui-input placeholder="Loose"></ui-input>
      </div>

      <h3>md</h3>
      <div class="layout-row" size="md" density="compact">
        <span class="layout-label">compact</span>
        <ui-input placeholder="Compact"></ui-input>
      </div>
      <div class="layout-row" size="md" density="default">
        <span class="layout-label">default</span>
        <ui-input placeholder="Default"></ui-input>
      </div>
      <div class="layout-row" size="md" density="loose">
        <span class="layout-label">loose</span>
        <ui-input placeholder="Loose"></ui-input>
      </div>

      <h3>lg</h3>
      <div class="layout-row" size="lg" density="compact">
        <span class="layout-label">compact</span>
        <ui-input placeholder="Compact"></ui-input>
      </div>
      <div class="layout-row" size="lg" density="default">
        <span class="layout-label">default</span>
        <ui-input placeholder="Default"></ui-input>
      </div>
      <div class="layout-row" size="lg" density="loose">
        <span class="layout-label">loose</span>
        <ui-input placeholder="Loose"></ui-input>
      </div>

      <h3>xl</h3>
      <div class="layout-row" size="xl" density="compact">
        <span class="layout-label">compact</span>
        <ui-input placeholder="Compact"></ui-input>
      </div>
      <div class="layout-row" size="xl" density="default">
        <span class="layout-label">default</span>
        <ui-input placeholder="Default"></ui-input>
      </div>
      <div class="layout-row" size="xl" density="loose">
        <span class="layout-label">loose</span>
        <ui-input placeholder="Loose"></ui-input>
      </div>
    </div>

    <!-- ── Inline ── -->

    <h2>Inline</h2>
    <div class="layout-section" size="sm">
      <p style="margin: 0 0 0.5rem; font-size: 0.875rem;">
        Enter your name: <ui-input inline placeholder="Name" style="width: 12rem;"></ui-input> and submit.
      </p>
      <p style="margin: 0; font-size: 0.75rem; color: var(--neutral-ink-muted);">
        The <code>inline</code> attribute restores shrink-wrap sizing for inputs placed inline with text.
      </p>
    </div>

    <!-- ── Radius ── -->

    <h2>Radius</h2>
    <div class="layout-section" size="md">
      <div class="layout-row" radius="sharp">
        <span class="layout-label">sharp</span>
        <ui-input placeholder="Sharp radius"></ui-input>
      </div>
      <div class="layout-row" radius="default">
        <span class="layout-label">default</span>
        <ui-input placeholder="Default radius"></ui-input>
      </div>
      <div class="layout-row" radius="round">
        <span class="layout-label">round</span>
        <ui-input placeholder="Round radius"></ui-input>
      </div>
    </div>

    <!-- ── Events ── -->

    <h2>Events</h2>
    <div class="layout-section" size="sm">
      <ui-input id="event-input" placeholder="Type to see events..."></ui-input>
      <div class="log" id="event-log"></div>
      <pre class="layout-code"><code set:html={codeExamples.events} /><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Form Association ── -->

    <h2>Form Association</h2>
    <div class="layout-section" size="sm">
      <form id="demo-form">
        <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 0.75rem;">
          <ui-input name="username" placeholder="Username">
            <ui-icon name="user" slot="leading"></ui-icon>
          </ui-input>
          <ui-input name="email" placeholder="Email">
            <ui-icon name="envelope" slot="leading"></ui-icon>
          </ui-input>
          <ui-input name="message" placeholder="Message">
            <ui-icon name="pencil-simple" slot="leading"></ui-icon>
          </ui-input>
        </div>
        <div class="layout-row">
          <ui-button variant="primary" type="submit"><span slot="label">Submit</span></ui-button>
          <ui-button variant="secondary" type="reset"><span slot="label">Reset</span></ui-button>
        </div>
      </form>
      <div class="log" id="form-log"></div>
      <pre class="layout-code"><code>&lt;form id="demo-form"&gt;
  &lt;ui-input name="username" placeholder="Username"&gt;
    &lt;ui-icon name="user" slot="leading"&gt;&lt;/ui-icon&gt;
  &lt;/ui-input&gt;
  &lt;ui-input name="email" placeholder="Email"&gt;
    &lt;ui-icon name="envelope" slot="leading"&gt;&lt;/ui-icon&gt;
  &lt;/ui-input&gt;
  &lt;ui-button variant="primary" type="submit"&gt;Submit&lt;/ui-button&gt;
  &lt;ui-button variant="secondary" type="reset"&gt;Reset&lt;/ui-button&gt;
&lt;/form&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Cascading ── -->

    <h2>Cascading</h2>
    <div class="layout-section">
      <h3>Parent size="md", child overrides</h3>
      <div class="layout-row" size="md">
        <ui-input placeholder="Inherited md"></ui-input>
        <ui-input size="xs" placeholder="Override xs"></ui-input>
        <ui-input size="lg" placeholder="Override lg"></ui-input>
      </div>

      <h3>Section cascading all attributes</h3>
      <section size="sm" density="compact" radius="round" intent="accent">
        <div class="layout-row">
          <ui-input variant="outline" placeholder="All inherited"></ui-input>
          <ui-input variant="default" placeholder="All inherited"></ui-input>
          <ui-input variant="ghost" placeholder="All inherited"></ui-input>
        </div>
      </section>
    </div>

    <!-- ── Variants x Intents ── -->

    <h2>Variants x Intents</h2>
    <div class="layout-section" size="sm">
      <h3>Outline</h3>
      <div class="layout-row">
        <ui-input variant="outline" intent="neutral" placeholder="Neutral"></ui-input>
        <ui-input variant="outline" intent="accent" placeholder="Accent"></ui-input>
        <ui-input variant="outline" intent="info" placeholder="Info"></ui-input>
        <ui-input variant="outline" intent="success" placeholder="Success"></ui-input>
        <ui-input variant="outline" intent="warning" placeholder="Warning"></ui-input>
        <ui-input variant="outline" intent="danger" placeholder="Danger"></ui-input>
      </div>
      <h3>Default</h3>
      <div class="layout-row">
        <ui-input variant="default" intent="neutral" placeholder="Neutral"></ui-input>
        <ui-input variant="default" intent="accent" placeholder="Accent"></ui-input>
        <ui-input variant="default" intent="info" placeholder="Info"></ui-input>
        <ui-input variant="default" intent="success" placeholder="Success"></ui-input>
        <ui-input variant="default" intent="warning" placeholder="Warning"></ui-input>
        <ui-input variant="default" intent="danger" placeholder="Danger"></ui-input>
      </div>
      <h3>Ghost</h3>
      <div class="layout-row">
        <ui-input variant="ghost" intent="neutral" placeholder="Neutral"></ui-input>
        <ui-input variant="ghost" intent="accent" placeholder="Accent"></ui-input>
        <ui-input variant="ghost" intent="info" placeholder="Info"></ui-input>
        <ui-input variant="ghost" intent="success" placeholder="Success"></ui-input>
        <ui-input variant="ghost" intent="warning" placeholder="Warning"></ui-input>
        <ui-input variant="ghost" intent="danger" placeholder="Danger"></ui-input>
      </div>
    </div>

    <!-- ── Debug States (force-*) ── -->

    <h2>Debug States (<code>force-*</code>)</h2>
    <div class="layout-section">
      <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin: 0 0 1rem;">
        Attribute-driven pseudo-state overrides for DevTools debugging and visual testing.
      </p>
      <ui-stack gap="4">
        <div>
          <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin: 0 0 0.5rem;">force-hover (empty)</p>
          <ui-input force-hover placeholder="Hovered input"></ui-input>
        </div>
        <div>
          <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin: 0 0 0.5rem;">force-focus (empty)</p>
          <ui-input force-focus placeholder="Focused input"></ui-input>
        </div>
        <div>
          <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin: 0 0 0.5rem;">force-hover (filled)</p>
          <ui-input force-hover value="Filled + hovered"></ui-input>
        </div>
        <div>
          <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin: 0 0 0.5rem;">force-focus (filled)</p>
          <ui-input force-focus value="Filled + focused"></ui-input>
        </div>
      </ui-stack>
    </div>
  </main>

  <script>
// Event logging
      const eventInput = document.getElementById('event-input');
      const eventLog = document.getElementById('event-log');
      let count = 0;

      eventInput.addEventListener('ui-input', (e) => {
        count++;
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.textContent = `#${count} ui-input — value: "${e.detail.value}"`;
        eventLog.prepend(entry);
      });

      eventInput.addEventListener('ui-change', (e) => {
        count++;
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.textContent = `#${count} ui-change — value: "${e.detail.value}"`;
        eventLog.prepend(entry);
      });

      // Form logging
      const form = document.getElementById('demo-form');
      const formLog = document.getElementById('form-log');

      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const data = new FormData(form);
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.textContent = `submit — ${[...data.entries()].map(([k, v]) => `${k}: "${v}"`).join(', ')}`;
        formLog.prepend(entry);
      });

      form.addEventListener('reset', () => {
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.textContent = 'reset';
        formLog.prepend(entry);
      });
// ── Copy buttons ──

      for (const btn of document.querySelectorAll('.copy-btn')) {
        btn.addEventListener('click', async () => {
          const code = btn.closest('.layout-code')?.querySelector('code');
          if (!code) return;
          await navigator.clipboard.writeText(code.textContent);
          const icon = btn.querySelector('ui-icon');
          if (icon) {
            icon.setAttribute('name', 'check');
            setTimeout(() => { icon.setAttribute('name', 'copy'); }, 1500);
          }
        });
      }
  </script>
</SidebarLayout>
