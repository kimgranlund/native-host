---
import SidebarLayout from '../../layouts/SidebarLayout.astro';
const detailPointerType = `{ pointerType }`;
---
<SidebarLayout title="Hoverable">
  <main>
<h1>Hoverable</h1>
    <p style="color: var(--neutral-ink-muted); font-size: 0.875rem; margin-bottom: 1.5rem;">
      Pointer hover state with configurable enter/leave delays. Sets <code>[hovered]</code> attribute and dispatches <code>ui-hover-enter</code> / <code>ui-hover-leave</code> events.
    </p>

    <!-- ── Instant Hover ── -->

    <h2>Instant Hover</h2>
    <div class="layout-section">
      <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin-bottom: 0.75rem;">
        Default 0ms delays. The <code>[hovered]</code> attribute toggles immediately on pointer enter/leave.
      </p>
      <ui-controller traits="hoverable">
        <div class="hover-card" id="instant-card">
          Hover over me <span class="hover-status">idle</span>
        </div>
      </ui-controller>
      <div id="instant-log" class="output"></div>
      <pre class="layout-code"><code>&lt;ui-controller traits="hoverable"&gt;
  &lt;div class="hover-card"&gt;
    Hover over me
  &lt;/div&gt;
&lt;/ui-controller&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Hover Intent ── -->

    <h2>Hover Intent (500ms)</h2>
    <div class="layout-section">
      <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin-bottom: 0.75rem;">
        <code>hoverable-delay="500"</code> prevents accidental hover triggers. Pointer must rest on the element for 500ms before activation.
      </p>
      <ui-controller traits="hoverable" hoverable-delay="500">
        <div class="hover-card" id="intent-card">
          Hover and wait 500ms <span class="hover-status">idle</span>
        </div>
      </ui-controller>
      <div id="intent-log" class="output"></div>
      <pre class="layout-code"><code>&lt;ui-controller traits="hoverable" hoverable-delay="500"&gt;
  &lt;div class="hover-card"&gt;
    Hover and wait 500ms
  &lt;/div&gt;
&lt;/ui-controller&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Sticky Hover ── -->

    <h2>Sticky Hover (300ms leave)</h2>
    <div class="layout-section">
      <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin-bottom: 0.75rem;">
        <code>hoverable-leave-delay="300"</code> so the hover state persists briefly after the pointer leaves. Useful for menus or tooltips with a gap between trigger and content.
      </p>
      <ui-controller traits="hoverable" hoverable-leave-delay="300">
        <div class="hover-card" id="sticky-card">
          Hover, then leave slowly <span class="hover-status">idle</span>
        </div>
      </ui-controller>
      <div id="sticky-log" class="output"></div>
      <pre class="layout-code"><code>&lt;ui-controller traits="hoverable" hoverable-leave-delay="300"&gt;
  &lt;div class="hover-card"&gt;
    Hover, then leave slowly
  &lt;/div&gt;
&lt;/ui-controller&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Combined Delays ── -->

    <h2>Combined Delays</h2>
    <div class="layout-section">
      <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin-bottom: 0.75rem;">
        Both <code>hoverable-delay="400"</code> and <code>hoverable-leave-delay="200"</code>. Requires intent to activate and lingers briefly on leave.
      </p>
      <ui-controller traits="hoverable" hoverable-delay="400" hoverable-leave-delay="200">
        <div class="hover-card" id="combined-card">
          400ms enter + 200ms leave <span class="hover-status">idle</span>
        </div>
      </ui-controller>
      <div id="combined-log" class="output"></div>
      <pre class="layout-code"><code>&lt;ui-controller traits="hoverable" hoverable-delay="400" hoverable-leave-delay="200"&gt;
  &lt;div class="hover-card"&gt;
    400ms enter + 200ms leave
  &lt;/div&gt;
&lt;/ui-controller&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── API Reference ── -->

    <h2>API</h2>

    <div class="api-section">
      <h3>Properties</h3>
      <table class="api-table">
        <thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead>
        <tbody>
          <tr>
            <td><code>hoverDelay</code></td>
            <td><code>number</code></td>
            <td><code>0</code></td>
            <td>Milliseconds to wait after pointer enter before setting <code>[hovered]</code>. Prevents accidental hover triggers.</td>
          </tr>
          <tr>
            <td><code>hoverLeaveDelay</code></td>
            <td><code>number</code></td>
            <td><code>0</code></td>
            <td>Milliseconds to wait after pointer leave before removing <code>[hovered]</code>. Useful for menus with gaps.</td>
          </tr>
          <tr>
            <td><code>hoverDisabled</code></td>
            <td><code>boolean</code></td>
            <td><code>false</code></td>
            <td>Disables hover behavior when true. Pointer events are ignored.</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="api-section">
      <h3>Events</h3>
      <table class="api-table">
        <thead><tr><th>Event</th><th>Detail</th><th>Description</th></tr></thead>
        <tbody>
          <tr>
            <td><code>ui-hover-enter</code></td>
            <td><code set:html={detailPointerType} /></td>
            <td>Fired when hover activates (after delay, if configured). <code>pointerType</code> is <code>'mouse'</code>, <code>'pen'</code>, etc.</td>
          </tr>
          <tr>
            <td><code>ui-hover-leave</code></td>
            <td><code set:html={detailPointerType} /></td>
            <td>Fired when hover deactivates (after leave delay, if configured).</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="api-section">
      <h3>CSS</h3>
      <table class="api-table">
        <thead><tr><th>Selector</th><th>Description</th></tr></thead>
        <tbody>
          <tr>
            <td><code>[hovered]</code></td>
            <td>Present on the element while hover is active. Use for styling hover states with delay support.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>

  <script>
import '../../scripts/copy-buttons';

      // ── Helper: update status badge ──

      function bindStatus(el) {
        const badge = el.querySelector('.hover-status');
        el.addEventListener('ui-hover-enter', () => { badge.textContent = 'hovered'; });
        el.addEventListener('ui-hover-leave', () => { badge.textContent = 'idle'; });
      }

      // ── Bind status badges ──

      for (const el of document.querySelectorAll('.hover-card')) {
        bindStatus(el);
      }

      // ── Helper: event logging ──

      function appendLog(el, msg) {
        const line = document.createElement('div');
        line.textContent = msg;
        el.appendChild(line);
        el.scrollTop = el.scrollHeight;
      }

      // ── Instant Hover ──

      const instantCard = document.getElementById('instant-card');
      const instantLogEl = document.getElementById('instant-log');
      instantCard.addEventListener('ui-hover-enter', (e) => {
        appendLog(instantLogEl, `Enter (${e.detail.pointerType})`);
      });
      instantCard.addEventListener('ui-hover-leave', (e) => {
        appendLog(instantLogEl, `Leave (${e.detail.pointerType})`);
      });

      // ── Hover Intent ──

      const intentCard = document.getElementById('intent-card');
      const intentLogEl = document.getElementById('intent-log');
      intentCard.addEventListener('ui-hover-enter', (e) => {
        appendLog(intentLogEl, `Enter after 500ms (${e.detail.pointerType})`);
      });
      intentCard.addEventListener('ui-hover-leave', (e) => {
        appendLog(intentLogEl, `Leave (${e.detail.pointerType})`);
      });

      // ── Sticky Hover ──

      const stickyCard = document.getElementById('sticky-card');
      const stickyLogEl = document.getElementById('sticky-log');
      stickyCard.addEventListener('ui-hover-enter', (e) => {
        appendLog(stickyLogEl, `Enter (${e.detail.pointerType})`);
      });
      stickyCard.addEventListener('ui-hover-leave', (e) => {
        appendLog(stickyLogEl, `Leave after 300ms delay (${e.detail.pointerType})`);
      });

      // ── Combined Delays ──

      const combinedCard = document.getElementById('combined-card');
      const combinedLogEl = document.getElementById('combined-log');
      combinedCard.addEventListener('ui-hover-enter', (e) => {
        appendLog(combinedLogEl, `Enter after 400ms (${e.detail.pointerType})`);
      });
      combinedCard.addEventListener('ui-hover-leave', (e) => {
        appendLog(combinedLogEl, `Leave after 200ms (${e.detail.pointerType})`);
      });
  </script>
  <style is:global>
    /* ── Hover Cards ── */

    .hover-card {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem 1rem;
      background: var(--neutral-panel);
      border: 1px solid var(--neutral-border-muted);
      border-radius: var(--_radius);
      font-size: 0.875rem;
      color: var(--neutral-ink);
      transition: background 200ms ease, border-color 200ms ease, color 200ms ease, box-shadow 200ms ease;
      user-select: none;
      cursor: default;
    }

    .hover-card[hovered] {
      background: var(--accent-surface);
      border-color: var(--accent-border);
      color: var(--accent-surface-ink);
      box-shadow: 0 0 0 3px var(--accent-surface);
    }

    .hover-status {
      display: inline-block;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.125rem 0.5rem;
      border-radius: 9999px;
      background: var(--neutral-border-muted);
      color: var(--neutral-ink-muted);
      margin-left: 0.75rem;
      transition: background 200ms ease, color 200ms ease;
    }

    [hovered] .hover-status {
      background: var(--accent-ink);
      color: var(--accent-surface);
    }

    .output {
      font-family: monospace;
      font-size: 0.75rem;
      color: var(--neutral-ink-muted);
      max-height: 6rem;
      overflow-y: auto;
      margin-top: 0.75rem;
      padding: 0.5rem;
      background: var(--neutral-panel);
      border-radius: 0.25rem;
    }

    /* ── Code Blocks ── */




    /* ── API Reference ── */

    .api-section {
      margin-bottom: 1.5rem;
    }

    .api-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8125rem;
    }

    .api-table th {
      text-align: left;
      font-weight: 600;
      padding: 0.5rem 0.75rem;
      border-bottom: 2px solid var(--neutral-border-muted);
      color: var(--neutral-ink-strong);
    }

    .api-table td {
      padding: 0.5rem 0.75rem;
      border-bottom: 1px solid var(--neutral-border-muted);
      vertical-align: top;
    }

    .api-table code {
      font-family: ui-monospace, monospace;
      font-size: 0.75rem;
      background: var(--neutral-panel);
      padding: 0.0625rem 0.3125rem;
      border-radius: 0.1875rem;
    }

    .api-table td:first-child code {
      white-space: nowrap;
    }
</style>

</SidebarLayout>
