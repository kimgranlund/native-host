<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ui-dialog — Component Demo</title>
    <link rel="stylesheet" href="@nonoun/native-ui/css/foundation" />
    <link rel="stylesheet" href="@nonoun/native-ui/css/components" />
    <style>
      body {
        background: var(--neutral-doc);
        color: var(--neutral-950);
      }

      main {
        padding: 2rem;
        max-width: 64rem;
      }

      h1 {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      h2 {
        font-size: 1rem;
        font-weight: 700;
        margin-bottom: 1rem;
        margin-top: 2rem;
        color: var(--neutral-ink-strong);
      }

      .demo-section {
        background: var(--neutral-body);
        border: 1px solid var(--neutral-border-muted);
        border-radius: var(--_radius);
        padding: 1.5rem;
        margin-bottom: 1rem;
      }

      ui-dialog > ui-card {
        width: min(28rem, calc(100vw - 2rem));
        box-shadow:
          0 8px 30px oklch(0% 0 0 / 0.12),
          0 2px 8px oklch(0% 0 0 / 0.06);
      }

      /* ── Code Blocks ── */

      .demo-code {
        display: none;
        position: relative;
        background: var(--neutral-panel);
        border: 1px solid var(--neutral-border-muted);
        border-radius: var(--_radius);
        padding: 0.75rem;
        margin: 0;
        margin-top: 0.75rem;
        font-family: ui-monospace, monospace;
        font-size: 0.8125rem;
        line-height: 1.5;
        overflow-x: auto;
        white-space: pre;
        color: var(--neutral-ink);
      }

      .demo-code[visible] {
        display: block;
      }

      .demo-code > ui-button {
        position: absolute;
        top: 0.375rem;
        right: 0.375rem;
      }
    </style>
  </head>
  <body>
    <ui-layout><main>
    <h1>&lt;ui-dialog&gt;</h1>
    <p style="color: var(--neutral-ink-muted); font-size: 0.875rem; margin-bottom: 1.5rem;">
      Modal dialog built on native <code>&lt;dialog&gt;</code>. Opens via <code>showModal()</code>, closes on backdrop click, Escape, or programmatically. Content is promoted to the top layer with full token re-establishment.
    </p>

    <!-- ── Basic Dialog ── -->

    <h2>Basic Dialog</h2>
    <div class="demo-section">
      <ui-button id="open-basic">Open Dialog</ui-button>
      <ui-dialog id="basic-dialog">
        <ui-card>
          <ui-header><span slot="label">Confirm Action</span></ui-header>
          <ui-body>
            <p style="font-size: 0.875rem; color: var(--neutral-ink-muted); margin: 0; line-height: 1.5;">Are you sure you want to continue? This action cannot be undone.</p>
          </ui-body>
          <ui-footer>
            <ui-button id="basic-cancel">Cancel</ui-button>
            <ui-button id="basic-confirm" intent="accent">Confirm</ui-button>
          </ui-footer>
        </ui-card>
      </ui-dialog>
      <pre class="demo-code"><code>&lt;ui-button id="open-btn"&gt;Open Dialog&lt;/ui-button&gt;

&lt;ui-dialog id="my-dialog"&gt;
  &lt;ui-card&gt;
    &lt;ui-header&gt;&lt;span slot="label"&gt;Confirm Action&lt;/span&gt;&lt;/ui-header&gt;
    &lt;ui-body&gt;
      &lt;p&gt;Are you sure you want to continue?&lt;/p&gt;
    &lt;/ui-body&gt;
    &lt;ui-footer&gt;
      &lt;ui-button id="cancel-btn"&gt;Cancel&lt;/ui-button&gt;
      &lt;ui-button id="confirm-btn" intent="accent"&gt;Confirm&lt;/ui-button&gt;
    &lt;/ui-footer&gt;
  &lt;/ui-card&gt;
&lt;/ui-dialog&gt;

&lt;script&gt;
  const dialog = document.getElementById('my-dialog');
  document.getElementById('open-btn')
    .addEventListener('ui-press', () =&gt; dialog.showModal());
  document.getElementById('cancel-btn')
    .addEventListener('ui-press', () =&gt; dialog.close());
  document.getElementById('confirm-btn')
    .addEventListener('ui-press', () =&gt; dialog.close());
&lt;/script&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Form Dialog ── -->

    <h2>Form Dialog</h2>
    <div class="demo-section">
      <ui-button id="open-form">Edit Profile</ui-button>
      <ui-dialog id="form-dialog">
        <ui-card>
          <ui-header><span slot="label">Edit Profile</span></ui-header>
          <ui-body>
            <p style="font-size: 0.875rem; color: var(--neutral-ink-muted); margin: 0 0 0.75rem; line-height: 1.5;">Update your display name and email address.</p>
            <ui-stack gap="3">
              <ui-field>
                <label slot="label">Name</label>
                <ui-input placeholder="Your name"></ui-input>
              </ui-field>
              <ui-field>
                <label slot="label">Email</label>
                <ui-input type="email" placeholder="you@example.com"></ui-input>
              </ui-field>
            </ui-stack>
          </ui-body>
          <ui-footer>
            <ui-button id="form-cancel">Cancel</ui-button>
            <ui-button id="form-save" intent="accent">Save Changes</ui-button>
          </ui-footer>
        </ui-card>
      </ui-dialog>
      <pre class="demo-code"><code>&lt;ui-dialog id="form-dialog"&gt;
  &lt;ui-card&gt;
    &lt;ui-header&gt;&lt;span slot="label"&gt;Edit Profile&lt;/span&gt;&lt;/ui-header&gt;
    &lt;ui-body&gt;
      &lt;ui-stack gap="3"&gt;
        &lt;ui-field&gt;
          &lt;label slot="label"&gt;Name&lt;/label&gt;
          &lt;ui-input placeholder="Your name"&gt;&lt;/ui-input&gt;
        &lt;/ui-field&gt;
        &lt;ui-field&gt;
          &lt;label slot="label"&gt;Email&lt;/label&gt;
          &lt;ui-input type="email" placeholder="you@example.com"&gt;&lt;/ui-input&gt;
        &lt;/ui-field&gt;
      &lt;/ui-stack&gt;
    &lt;/ui-body&gt;
    &lt;ui-footer&gt;
      &lt;ui-button&gt;Cancel&lt;/ui-button&gt;
      &lt;ui-button intent="accent"&gt;Save Changes&lt;/ui-button&gt;
    &lt;/ui-footer&gt;
  &lt;/ui-card&gt;
&lt;/ui-dialog&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── No Close on Backdrop ── -->

    <h2>No Close on Backdrop</h2>
    <div class="demo-section">
      <p style="font-size: 0.8125rem; color: var(--neutral-ink-muted); margin-bottom: 0.75rem;">
        This dialog has <code>no-close-on-backdrop</code> — clicking outside doesn't close it. You must use the button.
      </p>
      <ui-button id="open-persistent">Open Persistent Dialog</ui-button>
      <ui-dialog id="persistent-dialog" no-close-on-backdrop>
        <ui-card>
          <ui-header><span slot="label">Important Notice</span></ui-header>
          <ui-body>
            <p style="font-size: 0.875rem; color: var(--neutral-ink-muted); margin: 0; line-height: 1.5;">This dialog can only be closed by clicking the button below. Clicking the backdrop or pressing Escape won't dismiss it.</p>
          </ui-body>
          <ui-footer>
            <ui-button id="persistent-close" intent="accent">Got it</ui-button>
          </ui-footer>
        </ui-card>
      </ui-dialog>
      <pre class="demo-code"><code>&lt;ui-dialog no-close-on-backdrop&gt;
  &lt;ui-card&gt;
    &lt;ui-header&gt;&lt;span slot="label"&gt;Important Notice&lt;/span&gt;&lt;/ui-header&gt;
    &lt;ui-body&gt;&lt;p&gt;Clicking outside won't close this dialog.&lt;/p&gt;&lt;/ui-body&gt;
    &lt;ui-footer&gt;
      &lt;ui-button intent="accent"&gt;Got it&lt;/ui-button&gt;
    &lt;/ui-footer&gt;
  &lt;/ui-card&gt;
&lt;/ui-dialog&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── No Close on Escape ── -->

    <h2>No Close on Escape</h2>
    <div class="demo-section">
      <p style="font-size: 0.8125rem; color: var(--neutral-ink-muted); margin-bottom: 0.75rem;">
        This dialog has <code>no-close-on-escape</code> — pressing Escape doesn't close it. Backdrop click still works.
      </p>
      <ui-button id="open-no-esc">Open (no Escape close)</ui-button>
      <ui-dialog id="no-esc-dialog" no-close-on-escape>
        <ui-card>
          <ui-header><span slot="label">Escape Disabled</span></ui-header>
          <ui-body>
            <p style="font-size: 0.875rem; color: var(--neutral-ink-muted); margin: 0; line-height: 1.5;">Press Escape — nothing happens. Click the backdrop or the button to close.</p>
          </ui-body>
          <ui-footer>
            <ui-button id="no-esc-close">Close</ui-button>
          </ui-footer>
        </ui-card>
      </ui-dialog>
    </div>

    <!-- ── Danger Dialog ── -->

    <h2>Danger Variant</h2>
    <div class="demo-section">
      <ui-button id="open-danger" intent="danger">Delete Account</ui-button>
      <ui-dialog id="danger-dialog">
        <ui-card>
          <ui-header><span slot="label" style="color: var(--danger-ink-strong);">Delete Account</span></ui-header>
          <ui-body>
            <p style="font-size: 0.875rem; color: var(--neutral-ink-muted); margin: 0; line-height: 1.5;">This will permanently delete your account and all associated data. This action cannot be reversed.</p>
          </ui-body>
          <ui-footer>
            <ui-button id="danger-cancel">Cancel</ui-button>
            <ui-button id="danger-confirm" intent="danger">Delete Forever</ui-button>
          </ui-footer>
        </ui-card>
      </ui-dialog>
      <pre class="demo-code"><code>&lt;ui-button intent="danger"&gt;Delete Account&lt;/ui-button&gt;

&lt;ui-dialog id="danger-dialog"&gt;
  &lt;ui-card&gt;
    &lt;ui-header&gt;
      &lt;span slot="label" style="color: var(--danger-ink-strong);"&gt;Delete Account&lt;/span&gt;
    &lt;/ui-header&gt;
    &lt;ui-body&gt;
      &lt;p&gt;This will permanently delete your account.&lt;/p&gt;
    &lt;/ui-body&gt;
    &lt;ui-footer&gt;
      &lt;ui-button&gt;Cancel&lt;/ui-button&gt;
      &lt;ui-button intent="danger"&gt;Delete Forever&lt;/ui-button&gt;
    &lt;/ui-footer&gt;
  &lt;/ui-card&gt;
&lt;/ui-dialog&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    </main></ui-layout>
    <script type="module">
      import '@nonoun/native-ui/register';

      function wire(openId, dialogId, closeIds) {
        const dialog = document.getElementById(dialogId);
        document.getElementById(openId).addEventListener('ui-press', () => dialog.showModal());
        for (const id of closeIds) {
          document.getElementById(id).addEventListener('ui-press', () => dialog.close());
        }
      }

      wire('open-basic', 'basic-dialog', ['basic-cancel', 'basic-confirm']);
      wire('open-form', 'form-dialog', ['form-cancel', 'form-save']);
      wire('open-persistent', 'persistent-dialog', ['persistent-close']);
      wire('open-no-esc', 'no-esc-dialog', ['no-esc-close']);
      wire('open-danger', 'danger-dialog', ['danger-cancel', 'danger-confirm']);
// ── Copy buttons ──

      for (const btn of document.querySelectorAll('.copy-btn')) {
        btn.addEventListener('click', async () => {
          const code = btn.closest('.demo-code')?.querySelector('code');
          if (!code) return;
          await navigator.clipboard.writeText(code.textContent);
          const icon = btn.querySelector('ui-icon');
          if (icon) {
            icon.setAttribute('name', 'check');
            setTimeout(() => { icon.setAttribute('name', 'copy'); }, 1500);
          }
        });
      }
    </script>
  </body>
</html>
