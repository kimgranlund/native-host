<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ui-listbox — Component Demo</title>
    <link rel="stylesheet" href="@nonoun/native-ui/css/foundation" />
    <link rel="stylesheet" href="@nonoun/native-ui/css/components" />
    <style>
      body {
        background: var(--neutral-doc);
        color: var(--neutral-950);
      }

      main {
        padding: 2rem;
      }

      h1 {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      h2 {
        font-size: 1rem;
        font-weight: 700;
        margin-bottom: 1rem;
        margin-top: 2rem;
        color: var(--neutral-ink-strong);
      }

      h3 {
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 0.5rem;
        margin-top: 1.5rem;
        color: var(--neutral-ink-muted);
      }

      .demo-section {
        background: var(--neutral-body);
        border: 1px solid var(--neutral-border-muted);
        border-radius: var(--_radius);
        padding: 1.5rem;
        margin-bottom: 1rem;
      }

      .demo-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
        gap: 1.5rem;
        align-items: start;
      }

      .demo-col {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      .demo-col-label {
        font-size: 0.625rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        color: var(--neutral-ink-muted);
      }

      .log {
        font-family: ui-monospace, monospace;
        font-size: 0.75rem;
        background: var(--neutral-panel);
        border: 1px solid var(--neutral-border-muted);
        border-radius: 0.375rem;
        padding: 0.75rem;
        max-height: 10rem;
        overflow-y: auto;
        margin-top: 0.5rem;
      }

      .log-entry {
        padding: 0.125rem 0;
        color: var(--neutral-ink-muted);
      }

      .value-display {
        font-family: ui-monospace, monospace;
        font-size: 0.75rem;
        color: var(--accent-ink);
        background: var(--accent-panel);
        border-radius: 0.25rem;
        padding: 0.25rem 0.5rem;
        display: inline-block;
      }

      /* ── Code Blocks ── */

      .demo-code {
        display: none;
        position: relative;
        background: var(--neutral-panel);
        border: 1px solid var(--neutral-border-muted);
        border-radius: var(--_radius);
        padding: 0.75rem;
        margin: 0;
        margin-top: 0.75rem;
        font-family: ui-monospace, monospace;
        font-size: 0.8125rem;
        line-height: 1.5;
        overflow-x: auto;
        white-space: pre;
        color: var(--neutral-ink);
      }

      .demo-code[visible] {
        display: block;
      }

      .demo-code > ui-button {
        position: absolute;
        top: 0.375rem;
        right: 0.375rem;
      }
    </style>
  </head>
  <body>
    <ui-layout><main>
    <h1>&lt;ui-listbox&gt; + &lt;ui-option&gt;</h1>
    <p style="color: var(--neutral-ink-muted); font-size: 0.875rem; margin-bottom: 1.5rem;">
      Listbox with roving focus, keyboard navigation, and selection management.
    </p>

    <!-- ── Basic ── -->

    <h2>Basic Listbox</h2>
    <div class="demo-section" intent="neutral">
      <div class="demo-grid">
        <div class="demo-col">
          <span class="demo-col-label">Default (single select)</span>
          <ui-listbox id="basic-listbox" variant="secondary">
            <ui-option value="apple">Apple</ui-option>
            <ui-option value="banana">Banana</ui-option>
            <ui-option value="cherry">Cherry</ui-option>
            <ui-option value="date">Date</ui-option>
            <ui-option value="elderberry">Elderberry</ui-option>
          </ui-listbox>
          <div>Selected: <span class="value-display" id="basic-value">none</span></div>
        </div>

        <div class="demo-col">
          <span class="demo-col-label">With disabled option</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Available</ui-option>
            <ui-option value="b" disabled>Disabled</ui-option>
            <ui-option value="c">Available</ui-option>
            <ui-option value="d" disabled>Disabled</ui-option>
            <ui-option value="e">Available</ui-option>
          </ui-listbox>
        </div>

        <div class="demo-col">
          <span class="demo-col-label">Pre-selected</span>
          <ui-listbox id="preselected-listbox" variant="secondary">
            <ui-option value="small">Small</ui-option>
            <ui-option value="medium">Medium</ui-option>
            <ui-option value="large">Large</ui-option>
          </ui-listbox>
        </div>
      </div>
      <pre class="demo-code"><code>&lt;ui-listbox&gt;
  &lt;ui-option value="apple"&gt;Apple&lt;/ui-option&gt;
  &lt;ui-option value="banana"&gt;Banana&lt;/ui-option&gt;
  &lt;ui-option value="cherry"&gt;Cherry&lt;/ui-option&gt;
  &lt;ui-option value="date" disabled&gt;Date&lt;/ui-option&gt;
&lt;/ui-listbox&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Grouped Options ── -->

    <h2>Grouped Options</h2>
    <div class="demo-section">
      <div class="demo-grid">
        <div class="demo-col">
          <span class="demo-col-label">With icons</span>
          <ui-listbox variant="ghost" size="sm">
            <ui-option-group>
              <ui-option-group-header><ui-icon name="house"></ui-icon> Getting Started</ui-option-group-header>
              <ui-option value="install">Installation</ui-option>
              <ui-option value="structure">Project Structure</ui-option>
            </ui-option-group>
            <ui-option-group>
              <ui-option-group-header><ui-icon name="rocket-launch"></ui-icon> Build Your Application</ui-option-group-header>
              <ui-option value="routing">Routing</ui-option>
              <ui-option value="data">Data Fetching</ui-option>
              <ui-option value="caching">Caching</ui-option>
              <ui-option value="styling">Styling</ui-option>
              <ui-option value="optimizing">Optimizing</ui-option>
            </ui-option-group>
            <ui-option-group>
              <ui-option-group-header><ui-icon name="book-open"></ui-icon> Reference</ui-option-group-header>
              <ui-option value="api">API Reference</ui-option>
              <ui-option value="config">Configuration</ui-option>
              <ui-option value="examples">Examples</ui-option>
            </ui-option-group>
          </ui-listbox>
        </div>

        <div class="demo-col">
          <span class="demo-col-label">Without icons</span>
          <ui-listbox variant="ghost" size="sm">
            <ui-option-group>
              <ui-option-group-header>Fruits</ui-option-group-header>
              <ui-option value="apple">Apple</ui-option>
              <ui-option value="banana">Banana</ui-option>
              <ui-option value="cherry">Cherry</ui-option>
            </ui-option-group>
            <ui-option-group>
              <ui-option-group-header>Vegetables</ui-option-group-header>
              <ui-option value="carrot">Carrot</ui-option>
              <ui-option value="broccoli">Broccoli</ui-option>
              <ui-option value="spinach">Spinach</ui-option>
            </ui-option-group>
          </ui-listbox>
        </div>
      </div>
      <pre class="demo-code"><code>&lt;ui-listbox variant="ghost" size="sm"&gt;
  &lt;ui-option-group&gt;
    &lt;ui-option-group-header&gt;
      &lt;ui-icon name="house"&gt;&lt;/ui-icon&gt; Getting Started
    &lt;/ui-option-group-header&gt;
    &lt;ui-option value="install"&gt;Installation&lt;/ui-option&gt;
    &lt;ui-option value="structure"&gt;Project Structure&lt;/ui-option&gt;
  &lt;/ui-option-group&gt;
&lt;/ui-listbox&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Sizes ── -->

    <h2>Sizes</h2>
    <div class="demo-section">
      <div class="demo-grid">
        <div class="demo-col">
          <span class="demo-col-label">xs</span>
          <ui-listbox size="xs" variant="secondary">
            <ui-option value="1">Option One</ui-option>
            <ui-option value="2">Option Two</ui-option>
            <ui-option value="3">Option Three</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">sm</span>
          <ui-listbox size="sm" variant="secondary">
            <ui-option value="1">Option One</ui-option>
            <ui-option value="2">Option Two</ui-option>
            <ui-option value="3">Option Three</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">md</span>
          <ui-listbox size="md" variant="secondary">
            <ui-option value="1">Option One</ui-option>
            <ui-option value="2">Option Two</ui-option>
            <ui-option value="3">Option Three</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">lg</span>
          <ui-listbox size="lg" variant="secondary">
            <ui-option value="1">Option One</ui-option>
            <ui-option value="2">Option Two</ui-option>
            <ui-option value="3">Option Three</ui-option>
          </ui-listbox>
        </div>
      </div>
      <pre class="demo-code"><code>&lt;ui-listbox size="sm"&gt;...&lt;/ui-listbox&gt;
&lt;ui-listbox size="md"&gt;...&lt;/ui-listbox&gt;
&lt;ui-listbox size="lg"&gt;...&lt;/ui-listbox&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Intents ── -->

    <h2>Intents</h2>
    <div class="demo-section" size="sm">
      <div class="demo-grid">
        <div class="demo-col">
          <span class="demo-col-label">Neutral</span>
          <ui-listbox intent="neutral" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">Accent</span>
          <ui-listbox intent="accent" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">Danger</span>
          <ui-listbox intent="danger" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
      </div>
    </div>

    <!-- ── Variants ── -->

    <h2>Variants</h2>
    <div class="demo-section" size="sm">
      <div class="demo-grid">
        <div class="demo-col">
          <span class="demo-col-label">primary</span>
          <ui-listbox variant="primary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">secondary</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">outline</span>
          <ui-listbox variant="outline">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">ghost</span>
          <ui-listbox variant="ghost">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">default</span>
          <ui-listbox variant="default">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
      </div>
    </div>

    <!-- ── Density ── -->

    <h2>Density</h2>
    <div class="demo-section" size="md">
      <div class="demo-grid">
        <div class="demo-col" density="loose">
          <span class="demo-col-label">loose</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col" density="default">
          <span class="demo-col-label">default</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col" density="compact">
          <span class="demo-col-label">compact</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
      </div>
    </div>

    <!-- ── Radius ── -->

    <h2>Radius</h2>
    <div class="demo-section" size="sm">
      <div class="demo-grid">
        <div class="demo-col" radius="sharp">
          <span class="demo-col-label">sharp</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col" radius="default">
          <span class="demo-col-label">default</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col" radius="round">
          <span class="demo-col-label">round</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
            <ui-option value="c">Option C</ui-option>
          </ui-listbox>
        </div>
      </div>
    </div>

    <!-- ── Cascading ── -->

    <h2>Cascading</h2>
    <div class="demo-section">
      <h3>Parent size="md", child overrides</h3>
      <div class="demo-grid" size="md" intent="accent">
        <div class="demo-col">
          <span class="demo-col-label">Inherited md</span>
          <ui-listbox variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">Override xs</span>
          <ui-listbox size="xs" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
          </ui-listbox>
        </div>
        <div class="demo-col">
          <span class="demo-col-label">Override lg</span>
          <ui-listbox size="lg" variant="secondary">
            <ui-option value="a">Option A</ui-option>
            <ui-option value="b">Option B</ui-option>
          </ui-listbox>
        </div>
      </div>

      <h3>Section cascading all attributes</h3>
      <section size="sm" density="compact" radius="round" intent="accent">
        <div class="demo-grid">
          <div class="demo-col">
            <span class="demo-col-label">All inherited</span>
            <ui-listbox variant="secondary">
              <ui-option value="a">Option A</ui-option>
              <ui-option value="b">Option B</ui-option>
              <ui-option value="c">Option C</ui-option>
            </ui-listbox>
          </div>
          <div class="demo-col">
            <span class="demo-col-label">All inherited (outline)</span>
            <ui-listbox variant="outline">
              <ui-option value="a">Option A</ui-option>
              <ui-option value="b">Option B</ui-option>
              <ui-option value="c">Option C</ui-option>
            </ui-listbox>
          </div>
        </div>
      </section>
    </div>

    <!-- ── Events ── -->

    <h2>Events</h2>
    <div class="demo-section" size="sm">
      <ui-listbox id="event-listbox" variant="secondary" style="max-width: 220px;">
        <ui-option value="red">Red</ui-option>
        <ui-option value="green">Green</ui-option>
        <ui-option value="blue">Blue</ui-option>
        <ui-option value="yellow">Yellow</ui-option>
      </ui-listbox>
      <div class="log" id="event-log"></div>
      <pre class="demo-code"><code>&lt;ui-listbox id="my-listbox"&gt;
  &lt;ui-option value="red"&gt;Red&lt;/ui-option&gt;
  &lt;ui-option value="green"&gt;Green&lt;/ui-option&gt;
  &lt;ui-option value="blue"&gt;Blue&lt;/ui-option&gt;
&lt;/ui-listbox&gt;

&lt;script&gt;
  myListbox.addEventListener('ui-change', (e) =&gt; {
    console.log(e.detail.value);
  });
&lt;/script&gt;</code><ui-button class="copy-btn" size="sm" variant="ghost" aria-label="Copy"><ui-icon name="copy"></ui-icon></ui-button></pre>
    </div>

    <!-- ── Debug States (force-*) ── -->

    <h2>Debug States (<code>force-*</code>)</h2>
    <div class="demo-section" size="sm">
      <p style="font-size: 0.75rem; color: var(--neutral-ink-muted); margin: 0 0 1rem;">
        Attribute-driven pseudo-state overrides for DevTools debugging and visual testing. Applied to individual <code>ui-option</code> elements.
      </p>
      <ui-listbox variant="secondary" style="max-width: 220px;">
        <ui-option value="hover" force-hover>Force hover</ui-option>
        <ui-option value="active" force-active>Force active</ui-option>
        <ui-option value="focus" force-focus-visible>Force focus-visible</ui-option>
        <ui-option value="normal">Normal</ui-option>
      </ui-listbox>
    </div>

    </main></ui-layout>
    <script type="module">
      import '@nonoun/native-ui/register';

      // Basic listbox value tracking
      const basicListbox = document.getElementById('basic-listbox');
      const basicValue = document.getElementById('basic-value');

      basicListbox.addEventListener('ui-change', (e) => {
        basicValue.textContent = e.detail.value;
      });

      // Pre-select "medium"
      const preListbox = document.getElementById('preselected-listbox');
      preListbox.addEventListener('ui-change', () => {});
      // Programmatic select after registration
      requestAnimationFrame(() => {
        preListbox.controller.select('medium');
      });

      // Event logging
      const eventListbox = document.getElementById('event-listbox');
      const eventLog = document.getElementById('event-log');
      let eventCount = 0;

      eventListbox.addEventListener('ui-select', (e) => {
        eventCount++;
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.textContent = `#${eventCount} ui-select — value: "${e.detail.value}", label: "${e.detail.label}"`;
        eventLog.prepend(entry);
      });

      eventListbox.addEventListener('ui-change', (e) => {
        eventCount++;
        const entry = document.createElement('div');
        entry.className = 'log-entry';
        entry.textContent = `#${eventCount} ui-change — value: "${e.detail.value}", label: "${e.detail.label}"`;
        eventLog.prepend(entry);
      });
// ── Copy buttons ──

      for (const btn of document.querySelectorAll('.copy-btn')) {
        btn.addEventListener('click', async () => {
          const code = btn.closest('.demo-code')?.querySelector('code');
          if (!code) return;
          await navigator.clipboard.writeText(code.textContent);
          const icon = btn.querySelector('ui-icon');
          if (icon) {
            icon.setAttribute('name', 'check');
            setTimeout(() => { icon.setAttribute('name', 'copy'); }, 1500);
          }
        });
      }
    </script>
  </body>
</html>
