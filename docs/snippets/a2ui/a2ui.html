<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A2UI Protocol — Interaction OS Demo</title>
    <link rel="stylesheet" href="@nonoun/native-ui/css/foundation" />
    <link rel="stylesheet" href="@nonoun/native-ui/css/components" />
    <style>
      body {
        background: var(--neutral-doc);
        color: var(--neutral-950);
      }

      main {
        padding: 2rem;
      }

      h1 {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
      }

      h2 {
        font-size: 1rem;
        font-weight: 700;
        margin-bottom: 1rem;
        margin-top: 2rem;
        color: var(--neutral-ink-strong);
      }

      h3 {
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 0.5rem;
        margin-top: 1.5rem;
        color: var(--neutral-ink-muted);
      }

      .demo-row {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        gap: 0.5rem;
        margin-bottom: 0.75rem;
      }

      .demo-section {
        background: var(--neutral-body);
        border: 1px solid var(--neutral-border-muted);
        border-radius: var(--_radius);
        padding: 1.5rem;
        margin-bottom: 1rem;
      }

      .log {
        font-family: ui-monospace, monospace;
        font-size: 0.75rem;
        background: var(--neutral-panel);
        border: 1px solid var(--neutral-border-muted);
        border-radius: 0.375rem;
        padding: 0.75rem;
        max-height: 12rem;
        overflow-y: auto;
        margin-top: 0.5rem;
      }

      .log-entry {
        padding: 0.125rem 0;
        color: var(--neutral-ink-muted);
      }

      .log-entry.cmd {
        color: var(--accent-ink);
      }

      .log-entry.action {
        color: var(--success-ink);
      }

      .log-entry.error {
        color: var(--danger-ink);
      }

      .log-entry.data {
        color: var(--warning-ink);
      }

      .status-bar {
        display: flex;
        gap: 1rem;
        align-items: center;
        font-size: 0.75rem;
        font-family: ui-monospace, monospace;
        margin-top: 0.75rem;
        padding: 0.5rem 0.75rem;
        background: var(--neutral-panel);
        border: 1px solid var(--neutral-border-muted);
        border-radius: 0.375rem;
      }

      .status-bar .label {
        color: var(--neutral-ink-muted);
      }

      .status-bar .value {
        color: var(--accent-ink);
        font-weight: 600;
      }

      .plan-input {
        font-family: ui-monospace, monospace;
        font-size: 0.75rem;
        tab-size: 2;
        white-space: pre-wrap;
        word-break: break-all;
        height: calc(var(--_min-height) * 5);
      }

    </style>
  </head>
  <body>
    <ui-layout><main>
    <h1>A2UI Protocol</h1>
    <p style="color: var(--neutral-ink-muted); font-size: 0.875rem; margin-bottom: 1.5rem;">
      Google A2UI (Agent-to-UI) protocol compatibility layer. Bidirectional conversion between A2UI flat adjacency lists and native-ui component trees.
    </p>

    <!-- ── Receive A2UI Messages ── -->

    <h2>Receive A2UI Messages</h2>
    <div class="demo-section">
      <p style="font-size: 0.8125rem; color: var(--neutral-ink-muted); margin-bottom: 1rem;">
        Send A2UI server messages to the adapter. Pick a preset or write raw JSON. The adapter converts the flat component list to a UINode tree and renders via PlanExecutor.
      </p>
      <h3>General</h3>
      <div class="demo-row">
        <ui-button size="sm" id="preset-hello">
          <span slot="label">Hello World</span>
        </ui-button>
        <ui-button size="sm" id="preset-form">
          <span slot="label">Contact Form</span>
        </ui-button>
        <ui-button size="sm" id="preset-card">
          <span slot="label">Product Card</span>
        </ui-button>
        <ui-button size="sm" id="preset-list">
          <span slot="label">Task List</span>
        </ui-button>
        <ui-button size="sm" id="preset-tabs">
          <span slot="label">Sectioned Content</span>
        </ui-button>
        <ui-button size="sm" id="preset-data">
          <span slot="label">Data Binding</span>
        </ui-button>
      </div>
      <h3>Interactive</h3>
      <div class="demo-row">
        <ui-button size="sm" id="preset-streaming">
          <span slot="label">Streaming</span>
        </ui-button>
        <ui-button size="sm" id="preset-multi-surface">
          <span slot="label">Multi-Surface</span>
        </ui-button>
        <ui-button size="sm" id="preset-live-form">
          <span slot="label">Live Form</span>
        </ui-button>
        <ui-button size="sm" id="preset-wizard">
          <span slot="label">Step Wizard</span>
        </ui-button>
        <ui-button size="sm" id="preset-confirm-delete">
          <span slot="label">Confirm Dialog</span>
        </ui-button>
        <ui-button size="sm" id="preset-toggle-settings">
          <span slot="label">Settings Panel</span>
        </ui-button>
      </div>
      <h3>Clinical / Diagnostic</h3>
      <div class="demo-row">
        <ui-button size="sm" id="preset-lab-results">
          <span slot="label">Lab Results</span>
        </ui-button>
        <ui-button size="sm" id="preset-vitals">
          <span slot="label">Vitals Monitor</span>
        </ui-button>
        <ui-button size="sm" id="preset-med-reconciliation">
          <span slot="label">Medication List</span>
        </ui-button>
        <ui-button size="sm" id="preset-referral">
          <span slot="label">Referral Form</span>
        </ui-button>
        <ui-button size="sm" id="preset-icd-lookup">
          <span slot="label">ICD-10 Lookup</span>
        </ui-button>
        <ui-button size="sm" id="preset-patient-intake">
          <span slot="label">Patient Intake</span>
        </ui-button>
        <ui-button size="sm" id="preset-prior-auth">
          <span slot="label">Prior Auth Status</span>
        </ui-button>
        <ui-button size="sm" id="preset-care-plan">
          <span slot="label">Care Plan</span>
        </ui-button>
      </div>
      <h3 hidden>Travel</h3>
      <div class="demo-row" hidden>
        <ui-button size="sm" id="preset-restaurant">
          <span slot="label">Restaurant Menu</span>
        </ui-button>
        <ui-button size="sm" id="preset-room-service">
          <span slot="label">Room Service</span>
        </ui-button>
        <ui-button size="sm" id="preset-amenities">
          <span slot="label">Amenities Booking</span>
        </ui-button>
        <ui-button size="sm" id="preset-room-recs">
          <span slot="label">Room Recommendations</span>
        </ui-button>
        <ui-button size="sm" id="preset-booking">
          <span slot="label">Booking Flow</span>
        </ui-button>
        <ui-button size="sm" id="preset-concierge">
          <span slot="label">Concierge Chat</span>
        </ui-button>
        <ui-button size="sm" id="preset-checkout">
          <span slot="label">Express Checkout</span>
        </ui-button>
        <ui-button size="sm" id="preset-local-guide">
          <span slot="label">Local Guide</span>
        </ui-button>
      </div>
      <div class="demo-row">
        <ui-button size="sm" id="preset-clear">
          <span slot="label">Clear</span>
        </ui-button>
      </div>
      <h3>Raw JSON Message</h3>
      <ui-textarea class="plan-input" id="message-input" rows="5" spellcheck="false"></ui-textarea>
      <div class="demo-row" style="margin-top: 0.75rem;">
        <ui-button size="sm" variant="primary" id="send-btn">
          <span slot="label">Send Message</span>
        </ui-button>
        <ui-button size="sm" id="send-data-btn">
          <span slot="label">Send Data Model</span>
        </ui-button>
      </div>
      <div class="status-bar">
        <span><span class="label">Surfaces:</span> <span class="value" id="surface-count">0</span></span>
        <span><span class="label">Supported Types:</span> <span class="value" id="type-count">0</span></span>
      </div>
      <div class="log" id="event-log"></div>
    </div>

    <!-- ── Emit (Plan → A2UI) ── -->

    <h2>Emit (Plan to A2UI)</h2>
    <div class="demo-section">
      <p style="font-size: 0.8125rem; color: var(--neutral-ink-muted); margin-bottom: 1rem;">
        Convert Planner-generated UI plans to A2UI updateComponents format. This is the outbound path — our plans serialized as A2UI wire messages.
      </p>
      <div class="demo-row">
        <ui-button size="sm" id="emit-form">
          <span slot="label">Emit Form</span>
        </ui-button>
        <ui-button size="sm" id="emit-actions">
          <span slot="label">Emit Actions</span>
        </ui-button>
        <ui-button size="sm" id="emit-card">
          <span slot="label">Emit Card</span>
        </ui-button>
      </div>
      <div class="log" id="emit-output" style="max-height: 16rem; white-space: pre-wrap; word-break: break-all;">Click an emit button to convert a Planner result to A2UI format...</div>
    </div>

    </main></ui-layout>
    <script type="module">
      import '@nonoun/native-ui/register';

      import { Kernel, resetKernel } from '@nonoun/native-ui/kernel';
      import { Planner } from '@nonoun/native-ui/kernel';
      import { createA2UIAdapter } from '@nonoun/native-ui/kernel';

      // ── Setup ──

      resetKernel();
      const kernel = new Kernel({ allowUnregistered: true });

      const eventLog = document.getElementById('event-log');
      const messageInput = document.getElementById('message-input');
      const surfaceCountEl = document.getElementById('surface-count');
      const typeCountEl = document.getElementById('type-count');
      const emitOutput = document.getElementById('emit-output');

      // WHY: UILayout.setup() is async — wait for the chat panel to exist.
      const layout = document.querySelector('ui-layout');
      await customElements.whenDefined('ui-layout');
      const chatPanel = await new Promise(resolve => {
        const check = () => {
          const el = layout.chatPanel;
          if (el) return resolve(el);
          requestAnimationFrame(check);
        };
        check();
      });
      const chatContent = chatPanel.querySelector('ui-chat-content');

      const adapter = createA2UIAdapter(kernel, {
        onClientMessage: (msg) => {
          console.log('[A2UI Client →]', JSON.stringify(msg, null, 2));
        },
        onRender: () => {
          chatPanel.setAttribute('open', '');
        },
      });
      typeCountEl.textContent = adapter.getSupportedTypes().length;

      function log(text, cls = '') {
        const entry = document.createElement('div');
        entry.className = `log-entry ${cls}`;
        entry.textContent = `[${new Date().toLocaleTimeString()}] ${text}`;
        eventLog.prepend(entry);
      }

      // Wire action listener via command bus
      kernel.bus.on(
        (cmd) => cmd.type.startsWith('a2ui:'),
        (cmd) => {
          log(`ACTION: ${cmd.type} → ${JSON.stringify(cmd.payload)}`, 'action');
        },
      );

      // ── Send Message ──

      document.getElementById('send-btn').addEventListener('ui-press', () => {
        const json = messageInput.value.trim();
        if (!json) return;

        try {
          const msg = JSON.parse(json);
          log(`RECEIVE: ${Object.keys(msg)[0]}`, 'cmd');
          adapter.receive(msg, chatContent);
          surfaceCountEl.textContent = adapter.getSurfaceIds().length;
        } catch (e) {
          log(`ERROR: ${e.message}`, 'error');
        }
      });

      document.getElementById('send-data-btn').addEventListener('ui-press', () => {
        const json = messageInput.value.trim();
        if (!json) return;

        try {
          const data = JSON.parse(json);
          const surfaceIds = adapter.getSurfaceIds();
          if (surfaceIds.length === 0) {
            log('ERROR: No active surface to send data to', 'error');
            return;
          }
          const surfaceId = surfaceIds[0];
          adapter.receive({
            updateDataModel: { surfaceId, value: data },
          });
          log(`DATA: Updated data model for ${surfaceId}`, 'data');
        } catch (e) {
          log(`ERROR: ${e.message}`, 'error');
        }
      });

      // ── Presets ──

      const PRESETS = {
        'preset-hello': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['heading', 'text', 'btn'] },
              { id: 'heading', component: 'Text', text: 'Hello, A2UI!', variant: 'h2' },
              { id: 'text', component: 'Text', text: 'This UI was generated from a flat A2UI component list.' },
              { id: 'btn', component: 'Button', text: 'Click Me', variant: 'primary', action: { event: { name: 'hello_click' } } },
            ],
          },
        },

        'preset-form': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['title', 'name-field', 'email-field', 'message-field', 'actions'] },
              { id: 'title', component: 'Text', text: 'Contact Us', variant: 'h2' },
              { id: 'name-field', component: 'TextField', label: 'Full Name', placeholder: 'John Doe' },
              { id: 'email-field', component: 'TextField', label: 'Email Address', placeholder: 'john@example.com', variant: 'shortText' },
              { id: 'message-field', component: 'TextArea', label: 'Message', placeholder: 'How can we help?' },
              { id: 'actions', component: 'Row', children: ['submit-btn', 'cancel-btn'] },
              { id: 'submit-btn', component: 'Button', text: 'Send Message', variant: 'primary', action: { event: { name: 'submit_form', context: {} } } },
              { id: 'cancel-btn', component: 'Button', text: 'Cancel', action: { event: { name: 'cancel_form' } } },
            ],
          },
        },

        'preset-card': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Card', child: 'card-content' },
              { id: 'card-content', component: 'Column', children: ['product-name', 'product-desc', 'product-price', 'product-actions'] },
              { id: 'product-name', component: 'Text', text: 'Premium Widget', variant: 'h3' },
              { id: 'product-desc', component: 'Text', text: 'A high-quality widget built with native web components. Supports all modern browsers.' },
              { id: 'product-price', component: 'Text', text: '$49.99', variant: 'h4' },
              { id: 'product-actions', component: 'Row', children: ['buy-btn', 'wishlist-btn'] },
              { id: 'buy-btn', component: 'Button', text: 'Add to Cart', variant: 'primary', action: { event: { name: 'add_to_cart' } } },
              { id: 'wishlist-btn', component: 'Button', text: 'Wishlist', action: { event: { name: 'add_to_wishlist' } } },
            ],
          },
        },

        'preset-list': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['title', 'task-list'] },
              { id: 'title', component: 'Text', text: 'Today\'s Tasks', variant: 'h2' },
              { id: 'task-list', component: 'List', children: ['task-1', 'task-2', 'task-3', 'task-4'] },
              { id: 'task-1', component: 'ListItem', text: 'Review pull requests', value: 'review-pr' },
              { id: 'task-2', component: 'ListItem', text: 'Update documentation', value: 'update-docs' },
              { id: 'task-3', component: 'ListItem', text: 'Fix CI pipeline', value: 'fix-ci' },
              { id: 'task-4', component: 'ListItem', text: 'Deploy to staging', value: 'deploy' },
            ],
          },
        },

        'preset-tabs': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['title', 'nav-row', 'overview-section', 'specs-section', 'reviews-section'] },
              { id: 'title', component: 'Text', text: 'Product Details', variant: 'h2' },
              { id: 'nav-row', component: 'Row', children: ['nav-overview', 'nav-specs', 'nav-reviews'] },
              { id: 'nav-overview', component: 'Button', text: 'Overview', variant: 'primary', action: { event: { name: 'tab_overview' } } },
              { id: 'nav-specs', component: 'Button', text: 'Specs', action: { event: { name: 'tab_specs' } } },
              { id: 'nav-reviews', component: 'Button', text: 'Reviews', action: { event: { name: 'tab_reviews' } } },
              { id: 'overview-section', component: 'Column', children: ['overview-heading', 'overview-text'] },
              { id: 'overview-heading', component: 'Text', text: 'Overview', variant: 'h3' },
              { id: 'overview-text', component: 'Text', text: 'A comprehensive overview of the product features, benefits, and use cases. Built with modern web standards.' },
              { id: 'specs-section', component: 'Column', children: ['specs-heading', 'spec-1', 'spec-2', 'spec-3'] },
              { id: 'specs-heading', component: 'Text', text: 'Specifications', variant: 'h3' },
              { id: 'spec-1', component: 'Text', text: 'Weight: 2.5 kg' },
              { id: 'spec-2', component: 'Text', text: 'Dimensions: 30 × 20 × 10 cm' },
              { id: 'spec-3', component: 'Text', text: 'Material: Recycled aluminum' },
              { id: 'reviews-section', component: 'Column', children: ['reviews-heading', 'reviews-text'] },
              { id: 'reviews-heading', component: 'Text', text: 'Reviews', variant: 'h3' },
              { id: 'reviews-text', component: 'Text', text: 'No reviews yet. Be the first to review this product!' },
            ],
          },
        },

        'preset-data': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['greeting', 'counter-row'] },
              { id: 'greeting', component: 'Text', text: { path: '/greeting' }, variant: 'h2' },
              { id: 'counter-row', component: 'Row', children: ['counter-label', 'inc-btn'] },
              { id: 'counter-label', component: 'Text', text: { path: '/counter' } },
              { id: 'inc-btn', component: 'Button', text: 'Increment', variant: 'primary', action: { event: { name: 'increment' } } },
            ],
          },
        },

        // ── Interactive: Live Form ──

        'preset-live-form': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['title', 'form-row', 'divider', 'preview-card'] },
              { id: 'title', component: 'Text', text: 'Live Preview — Data Binding', variant: 'h2' },
              { id: 'form-row', component: 'Column', children: ['name-field', 'role-field', 'bio-field'] },
              { id: 'name-field', component: 'TextField', label: 'Name', placeholder: 'Type your name...' },
              { id: 'role-field', component: 'TextField', label: 'Role', placeholder: 'e.g. Engineer' },
              { id: 'bio-field', component: 'TextArea', label: 'Bio', placeholder: 'Tell us about yourself...' },
              { id: 'divider', component: 'Divider' },
              { id: 'preview-card', component: 'Card', child: 'preview-col' },
              { id: 'preview-col', component: 'Column', children: ['preview-heading', 'preview-name', 'preview-role', 'preview-bio'] },
              { id: 'preview-heading', component: 'Text', text: 'Preview', variant: 'h3' },
              { id: 'preview-name', component: 'Text', text: { path: '/name' }, variant: 'h4' },
              { id: 'preview-role', component: 'Badge', text: { path: '/role' } },
              { id: 'preview-bio', component: 'Text', text: { path: '/bio' } },
            ],
          },
        },

        // ── Clinical / Diagnostic ──

        'preset-lab-results': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'patient-row', 'divider-1', 'cbc-card', 'metabolic-card', 'lipid-card', 'divider-2', 'actions'] },

              // Header
              { id: 'header', component: 'Text', text: 'Lab Results — Comprehensive Panel', variant: 'h2' },
              { id: 'patient-row', component: 'Row', children: ['patient-name', 'patient-dob', 'specimen-date', 'status-badge'] },
              { id: 'patient-name', component: 'Text', text: 'Patient: Jane Doe' },
              { id: 'patient-dob', component: 'Text', text: 'DOB: 1985-03-15' },
              { id: 'specimen-date', component: 'Text', text: 'Collected: 2026-02-18 08:30' },
              { id: 'status-badge', component: 'Badge', text: 'Final' },
              { id: 'divider-1', component: 'Divider' },

              // CBC Panel
              { id: 'cbc-card', component: 'Card', child: 'cbc-col' },
              { id: 'cbc-col', component: 'Column', children: ['cbc-title', 'cbc-wbc', 'cbc-rbc', 'cbc-hgb', 'cbc-hct', 'cbc-plt'] },
              { id: 'cbc-title', component: 'Text', text: 'Complete Blood Count (CBC)', variant: 'h3' },
              { id: 'cbc-wbc', component: 'Row', children: ['cbc-wbc-label', 'cbc-wbc-val', 'cbc-wbc-ref'] },
              { id: 'cbc-wbc-label', component: 'Text', text: 'WBC' },
              { id: 'cbc-wbc-val', component: 'Badge', text: '7.2 × 10³/µL' },
              { id: 'cbc-wbc-ref', component: 'Text', text: '(4.5–11.0)', variant: 'caption' },
              { id: 'cbc-rbc', component: 'Row', children: ['cbc-rbc-label', 'cbc-rbc-val', 'cbc-rbc-ref'] },
              { id: 'cbc-rbc-label', component: 'Text', text: 'RBC' },
              { id: 'cbc-rbc-val', component: 'Badge', text: '4.8 × 10⁶/µL' },
              { id: 'cbc-rbc-ref', component: 'Text', text: '(4.2–5.4)', variant: 'caption' },
              { id: 'cbc-hgb', component: 'Row', children: ['cbc-hgb-label', 'cbc-hgb-val', 'cbc-hgb-ref'] },
              { id: 'cbc-hgb-label', component: 'Text', text: 'Hemoglobin' },
              { id: 'cbc-hgb-val', component: 'Badge', text: '14.1 g/dL' },
              { id: 'cbc-hgb-ref', component: 'Text', text: '(12.0–16.0)', variant: 'caption' },
              { id: 'cbc-hct', component: 'Row', children: ['cbc-hct-label', 'cbc-hct-val', 'cbc-hct-ref'] },
              { id: 'cbc-hct-label', component: 'Text', text: 'Hematocrit' },
              { id: 'cbc-hct-val', component: 'Badge', text: '42.3%' },
              { id: 'cbc-hct-ref', component: 'Text', text: '(36.0–46.0)', variant: 'caption' },
              { id: 'cbc-plt', component: 'Row', children: ['cbc-plt-label', 'cbc-plt-val', 'cbc-plt-ref'] },
              { id: 'cbc-plt-label', component: 'Text', text: 'Platelets' },
              { id: 'cbc-plt-val', component: 'Badge', text: '245 × 10³/µL' },
              { id: 'cbc-plt-ref', component: 'Text', text: '(150–400)', variant: 'caption' },

              // Metabolic Panel
              { id: 'metabolic-card', component: 'Card', child: 'metabolic-col' },
              { id: 'metabolic-col', component: 'Column', children: ['metabolic-title', 'met-glucose', 'met-bun', 'met-creat', 'met-egfr', 'met-na', 'met-k'] },
              { id: 'metabolic-title', component: 'Text', text: 'Basic Metabolic Panel (BMP)', variant: 'h3' },
              { id: 'met-glucose', component: 'Row', children: ['met-glucose-label', 'met-glucose-val', 'met-glucose-ref'] },
              { id: 'met-glucose-label', component: 'Text', text: 'Glucose (fasting)' },
              { id: 'met-glucose-val', component: 'Badge', text: '105 mg/dL ↑' },
              { id: 'met-glucose-ref', component: 'Text', text: '(70–99) — elevated', variant: 'caption' },
              { id: 'met-bun', component: 'Row', children: ['met-bun-label', 'met-bun-val', 'met-bun-ref'] },
              { id: 'met-bun-label', component: 'Text', text: 'BUN' },
              { id: 'met-bun-val', component: 'Badge', text: '16 mg/dL' },
              { id: 'met-bun-ref', component: 'Text', text: '(7–20)', variant: 'caption' },
              { id: 'met-creat', component: 'Row', children: ['met-creat-label', 'met-creat-val', 'met-creat-ref'] },
              { id: 'met-creat-label', component: 'Text', text: 'Creatinine' },
              { id: 'met-creat-val', component: 'Badge', text: '0.9 mg/dL' },
              { id: 'met-creat-ref', component: 'Text', text: '(0.6–1.2)', variant: 'caption' },
              { id: 'met-egfr', component: 'Row', children: ['met-egfr-label', 'met-egfr-val', 'met-egfr-ref'] },
              { id: 'met-egfr-label', component: 'Text', text: 'eGFR' },
              { id: 'met-egfr-val', component: 'Badge', text: '> 90 mL/min' },
              { id: 'met-egfr-ref', component: 'Text', text: '(≥ 60 normal)', variant: 'caption' },
              { id: 'met-na', component: 'Row', children: ['met-na-label', 'met-na-val', 'met-na-ref'] },
              { id: 'met-na-label', component: 'Text', text: 'Sodium' },
              { id: 'met-na-val', component: 'Badge', text: '140 mEq/L' },
              { id: 'met-na-ref', component: 'Text', text: '(136–145)', variant: 'caption' },
              { id: 'met-k', component: 'Row', children: ['met-k-label', 'met-k-val', 'met-k-ref'] },
              { id: 'met-k-label', component: 'Text', text: 'Potassium' },
              { id: 'met-k-val', component: 'Badge', text: '4.2 mEq/L' },
              { id: 'met-k-ref', component: 'Text', text: '(3.5–5.0)', variant: 'caption' },

              // Lipid Panel
              { id: 'lipid-card', component: 'Card', child: 'lipid-col' },
              { id: 'lipid-col', component: 'Column', children: ['lipid-title', 'lip-tc', 'lip-ldl', 'lip-hdl', 'lip-trig', 'lipid-note'] },
              { id: 'lipid-title', component: 'Text', text: 'Lipid Panel', variant: 'h3' },
              { id: 'lip-tc', component: 'Row', children: ['lip-tc-label', 'lip-tc-val', 'lip-tc-ref'] },
              { id: 'lip-tc-label', component: 'Text', text: 'Total Cholesterol' },
              { id: 'lip-tc-val', component: 'Badge', text: '218 mg/dL ↑' },
              { id: 'lip-tc-ref', component: 'Text', text: '(< 200 desirable) — borderline', variant: 'caption' },
              { id: 'lip-ldl', component: 'Row', children: ['lip-ldl-label', 'lip-ldl-val', 'lip-ldl-ref'] },
              { id: 'lip-ldl-label', component: 'Text', text: 'LDL' },
              { id: 'lip-ldl-val', component: 'Badge', text: '138 mg/dL ↑' },
              { id: 'lip-ldl-ref', component: 'Text', text: '(< 100 optimal) — above optimal', variant: 'caption' },
              { id: 'lip-hdl', component: 'Row', children: ['lip-hdl-label', 'lip-hdl-val', 'lip-hdl-ref'] },
              { id: 'lip-hdl-label', component: 'Text', text: 'HDL' },
              { id: 'lip-hdl-val', component: 'Badge', text: '58 mg/dL' },
              { id: 'lip-hdl-ref', component: 'Text', text: '(≥ 40 normal)', variant: 'caption' },
              { id: 'lip-trig', component: 'Row', children: ['lip-trig-label', 'lip-trig-val', 'lip-trig-ref'] },
              { id: 'lip-trig-label', component: 'Text', text: 'Triglycerides' },
              { id: 'lip-trig-val', component: 'Badge', text: '110 mg/dL' },
              { id: 'lip-trig-ref', component: 'Text', text: '(< 150 normal)', variant: 'caption' },
              { id: 'lipid-note', component: 'Text', text: 'Historical: TC was 235 (2025-08), 228 (2025-11). Trending down with dietary changes.', variant: 'caption' },

              { id: 'divider-2', component: 'Divider' },
              { id: 'actions', component: 'Row', children: ['download-btn', 'share-btn', 'history-btn'] },
              { id: 'download-btn', component: 'Button', text: 'Download PDF', variant: 'primary', action: { event: { name: 'download_results' } } },
              { id: 'share-btn', component: 'Button', text: 'Share with Provider', action: { event: { name: 'share_results' } } },
              { id: 'history-btn', component: 'Button', text: 'View History', action: { event: { name: 'view_history' } } },
            ],
          },
        },

        // ── Travel: During Stay ──

        'preset-restaurant': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'subtitle', 'divider-1', 'starters-title', 'starter-list', 'mains-title', 'mains-list', 'desserts-title', 'dessert-list', 'divider-2', 'dietary-row', 'reserve-btn'] },

              { id: 'header', component: 'Text', text: 'The Lighthouse — Dinner Menu', variant: 'h2' },
              { id: 'subtitle', component: 'Text', text: 'Mediterranean cuisine · Open 18:00–22:30 · Smart casual', variant: 'caption' },
              { id: 'divider-1', component: 'Divider' },

              // Starters
              { id: 'starters-title', component: 'Text', text: 'Starters', variant: 'h3' },
              { id: 'starter-list', component: 'Column', children: ['s1-row', 's2-row', 's3-row'] },
              { id: 's1-row', component: 'Row', children: ['s1-name', 's1-price'] },
              { id: 's1-name', component: 'Text', text: 'Burrata with heirloom tomatoes, basil oil & sourdough' },
              { id: 's1-price', component: 'Badge', text: '€16' },
              { id: 's2-row', component: 'Row', children: ['s2-name', 's2-price'] },
              { id: 's2-name', component: 'Text', text: 'Grilled octopus, chickpea purée, smoked paprika' },
              { id: 's2-price', component: 'Badge', text: '€19' },
              { id: 's3-row', component: 'Row', children: ['s3-name', 's3-price'] },
              { id: 's3-name', component: 'Text', text: 'Wild mushroom soup, truffle cream (V)' },
              { id: 's3-price', component: 'Badge', text: '€14' },

              // Mains
              { id: 'mains-title', component: 'Text', text: 'Mains', variant: 'h3' },
              { id: 'mains-list', component: 'Column', children: ['m1-row', 'm2-row', 'm3-row', 'm4-row'] },
              { id: 'm1-row', component: 'Row', children: ['m1-name', 'm1-price'] },
              { id: 'm1-name', component: 'Text', text: 'Pan-seared sea bass, saffron risotto, fennel salad' },
              { id: 'm1-price', component: 'Badge', text: '€34' },
              { id: 'm2-row', component: 'Row', children: ['m2-name', 'm2-price'] },
              { id: 'm2-name', component: 'Text', text: 'Wagyu ribeye 250g, roasted bone marrow, triple-cooked chips' },
              { id: 'm2-price', component: 'Badge', text: '€52' },
              { id: 'm3-row', component: 'Row', children: ['m3-name', 'm3-price'] },
              { id: 'm3-name', component: 'Text', text: 'Lobster linguine, cherry tomato, chilli & garlic' },
              { id: 'm3-price', component: 'Badge', text: '€38' },
              { id: 'm4-row', component: 'Row', children: ['m4-name', 'm4-price'] },
              { id: 'm4-name', component: 'Text', text: 'Aubergine parmigiana, rocket salad (V)' },
              { id: 'm4-price', component: 'Badge', text: '€24' },

              // Desserts
              { id: 'desserts-title', component: 'Text', text: 'Desserts', variant: 'h3' },
              { id: 'dessert-list', component: 'Column', children: ['d1-row', 'd2-row'] },
              { id: 'd1-row', component: 'Row', children: ['d1-name', 'd1-price'] },
              { id: 'd1-name', component: 'Text', text: 'Tiramisu, espresso gelato' },
              { id: 'd1-price', component: 'Badge', text: '€12' },
              { id: 'd2-row', component: 'Row', children: ['d2-name', 'd2-price'] },
              { id: 'd2-name', component: 'Text', text: 'Dark chocolate fondant, passion fruit coulis' },
              { id: 'd2-price', component: 'Badge', text: '€14' },

              { id: 'divider-2', component: 'Divider' },
              { id: 'dietary-row', component: 'Row', children: ['dietary-note', 'allergen-btn'] },
              { id: 'dietary-note', component: 'Text', text: '(V) = Vegetarian · Please inform staff of allergies', variant: 'caption' },
              { id: 'allergen-btn', component: 'Button', text: 'View Allergens', action: { event: { name: 'view_allergens' } } },
              { id: 'reserve-btn', component: 'Button', text: 'Reserve a Table', variant: 'primary', action: { event: { name: 'reserve_table' } } },
            ],
          },
        },

        'preset-room-service': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'room-info', 'divider-1', 'order-title', 'item-list', 'divider-2', 'special-label', 'special-field', 'summary-card', 'place-order-btn'] },

              { id: 'header', component: 'Text', text: 'Room Service', variant: 'h2' },
              { id: 'room-info', component: 'Row', children: ['room-badge', 'hours-text'] },
              { id: 'room-badge', component: 'Badge', text: 'Room 412' },
              { id: 'hours-text', component: 'Text', text: 'Available 06:00–23:00 · Delivery in 25–35 min', variant: 'caption' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'order-title', component: 'Text', text: 'Select Items', variant: 'h3' },
              { id: 'item-list', component: 'Column', children: ['item-1', 'item-2', 'item-3', 'item-4', 'item-5', 'item-6'] },
              { id: 'item-1', component: 'Row', children: ['item-1-check', 'item-1-name', 'item-1-price'] },
              { id: 'item-1-check', component: 'CheckBox', label: '' },
              { id: 'item-1-name', component: 'Text', text: 'Club Sandwich' },
              { id: 'item-1-price', component: 'Badge', text: '€18' },
              { id: 'item-2', component: 'Row', children: ['item-2-check', 'item-2-name', 'item-2-price'] },
              { id: 'item-2-check', component: 'CheckBox', label: '' },
              { id: 'item-2-name', component: 'Text', text: 'Caesar Salad' },
              { id: 'item-2-price', component: 'Badge', text: '€16' },
              { id: 'item-3', component: 'Row', children: ['item-3-check', 'item-3-name', 'item-3-price'] },
              { id: 'item-3-check', component: 'CheckBox', label: '' },
              { id: 'item-3-name', component: 'Text', text: 'Margherita Pizza' },
              { id: 'item-3-price', component: 'Badge', text: '€22' },
              { id: 'item-4', component: 'Row', children: ['item-4-check', 'item-4-name', 'item-4-price'] },
              { id: 'item-4-check', component: 'CheckBox', label: '' },
              { id: 'item-4-name', component: 'Text', text: 'Fresh Orange Juice' },
              { id: 'item-4-price', component: 'Badge', text: '€8' },
              { id: 'item-5', component: 'Row', children: ['item-5-check', 'item-5-name', 'item-5-price'] },
              { id: 'item-5-check', component: 'CheckBox', label: '' },
              { id: 'item-5-name', component: 'Text', text: 'Espresso' },
              { id: 'item-5-price', component: 'Badge', text: '€5' },
              { id: 'item-6', component: 'Row', children: ['item-6-check', 'item-6-name', 'item-6-price'] },
              { id: 'item-6-check', component: 'CheckBox', label: '' },
              { id: 'item-6-name', component: 'Text', text: 'Bottled Still Water' },
              { id: 'item-6-price', component: 'Badge', text: '€4' },

              { id: 'divider-2', component: 'Divider' },
              { id: 'special-label', component: 'Text', text: 'Special Requests', variant: 'caption' },
              { id: 'special-field', component: 'TextArea', placeholder: 'Allergies, preferences, etc.' },

              { id: 'summary-card', component: 'Card', child: 'summary-col' },
              { id: 'summary-col', component: 'Row', children: ['summary-text', 'summary-total'] },
              { id: 'summary-text', component: 'Text', text: 'Estimated total (service charge included):' },
              { id: 'summary-total', component: 'Text', text: '€0.00', variant: 'h4' },

              { id: 'place-order-btn', component: 'Button', text: 'Place Order', variant: 'primary', action: { event: { name: 'place_room_service' } } },
            ],
          },
        },

        'preset-amenities': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'subtitle', 'divider-1', 'spa-card', 'pool-card', 'gym-card', 'divider-2', 'concierge-row'] },

              { id: 'header', component: 'Text', text: 'Hotel Amenities', variant: 'h2' },
              { id: 'subtitle', component: 'Text', text: 'Grand Marina Resort · Your stay: Feb 18–22', variant: 'caption' },
              { id: 'divider-1', component: 'Divider' },

              // Spa
              { id: 'spa-card', component: 'Card', child: 'spa-col' },
              { id: 'spa-col', component: 'Column', children: ['spa-row', 'spa-desc', 'spa-slots', 'spa-book-btn'] },
              { id: 'spa-row', component: 'Row', children: ['spa-icon', 'spa-title', 'spa-badge'] },
              { id: 'spa-icon', component: 'Icon', name: 'sparkle' },
              { id: 'spa-title', component: 'Text', text: 'Spa & Wellness', variant: 'h3' },
              { id: 'spa-badge', component: 'Badge', text: 'Open' },
              { id: 'spa-desc', component: 'Text', text: 'Full-body massage, facial treatments, sauna & steam room. Open 09:00–21:00.' },
              { id: 'spa-slots', component: 'Column', children: ['spa-slots-title', 'spa-slot-list'] },
              { id: 'spa-slots-title', component: 'Text', text: 'Available today:', variant: 'caption' },
              { id: 'spa-slot-list', component: 'List', children: ['spa-s1', 'spa-s2', 'spa-s3'] },
              { id: 'spa-s1', component: 'ListItem', text: '10:00 — Swedish Massage (60 min) · €85', value: 'spa-10' },
              { id: 'spa-s2', component: 'ListItem', text: '14:00 — Deep Tissue Massage (90 min) · €120', value: 'spa-14' },
              { id: 'spa-s3', component: 'ListItem', text: '16:30 — Facial Treatment (45 min) · €65', value: 'spa-1630' },
              { id: 'spa-book-btn', component: 'Button', text: 'Book Spa Session', variant: 'primary', action: { event: { name: 'book_spa' } } },

              // Pool
              { id: 'pool-card', component: 'Card', child: 'pool-col' },
              { id: 'pool-col', component: 'Column', children: ['pool-row', 'pool-desc', 'pool-cabana'] },
              { id: 'pool-row', component: 'Row', children: ['pool-icon', 'pool-title', 'pool-badge'] },
              { id: 'pool-icon', component: 'Icon', name: 'sun' },
              { id: 'pool-title', component: 'Text', text: 'Pool & Beach', variant: 'h3' },
              { id: 'pool-badge', component: 'Badge', text: 'Open' },
              { id: 'pool-desc', component: 'Text', text: 'Infinity pool, heated jacuzzi, private beach access. Pool: 07:00–20:00, Beach: 08:00–sunset.' },
              { id: 'pool-cabana', component: 'Row', children: ['cabana-text', 'cabana-btn'] },
              { id: 'cabana-text', component: 'Text', text: '3 cabanas available' },
              { id: 'cabana-btn', component: 'Button', text: 'Reserve Cabana', action: { event: { name: 'reserve_cabana' } } },

              // Gym
              { id: 'gym-card', component: 'Card', child: 'gym-col' },
              { id: 'gym-col', component: 'Column', children: ['gym-row', 'gym-desc', 'gym-class'] },
              { id: 'gym-row', component: 'Row', children: ['gym-icon', 'gym-title', 'gym-badge'] },
              { id: 'gym-icon', component: 'Icon', name: 'barbell' },
              { id: 'gym-title', component: 'Text', text: 'Fitness Center', variant: 'h3' },
              { id: 'gym-badge', component: 'Badge', text: '24h Access' },
              { id: 'gym-desc', component: 'Text', text: 'Cardio, free weights, yoga studio. Towels and water provided.' },
              { id: 'gym-class', component: 'Row', children: ['class-text', 'class-btn'] },
              { id: 'class-text', component: 'Text', text: 'Next class: Yoga at 07:00 (3 spots left)' },
              { id: 'class-btn', component: 'Button', text: 'Join Class', action: { event: { name: 'join_class' } } },

              { id: 'divider-2', component: 'Divider' },
              { id: 'concierge-row', component: 'Row', children: ['concierge-text', 'concierge-btn'] },
              { id: 'concierge-text', component: 'Text', text: 'Need something else? Our concierge is available 24/7.' },
              { id: 'concierge-btn', component: 'Button', text: 'Contact Concierge', variant: 'primary', action: { event: { name: 'contact_concierge' } } },
            ],
          },
        },

        // ── Travel: Hotel Booking ──

        'preset-room-recs': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'search-row', 'divider-1', 'room-1-card', 'room-2-card', 'room-3-card'] },

              { id: 'header', component: 'Text', text: 'Room Recommendations', variant: 'h2' },
              { id: 'search-row', component: 'Row', children: ['dates-text', 'guests-text', 'modify-btn'] },
              { id: 'dates-text', component: 'Text', text: 'Mar 5–9, 2026 (4 nights)' },
              { id: 'guests-text', component: 'Badge', text: '2 Adults' },
              { id: 'modify-btn', component: 'Button', text: 'Modify Search', action: { event: { name: 'modify_search' } } },
              { id: 'divider-1', component: 'Divider' },

              // Room 1: Deluxe
              { id: 'room-1-card', component: 'Card', child: 'room-1-col' },
              { id: 'room-1-col', component: 'Column', children: ['room-1-img', 'room-1-info', 'room-1-amenities', 'room-1-actions'] },
              { id: 'room-1-img', component: 'Image', url: 'https://images.unsplash.com/photo-1590490360182-c33d153d16ef?w=600&h=300&fit=crop', alt: 'Deluxe Room' },
              { id: 'room-1-info', component: 'Row', children: ['room-1-name', 'room-1-price'] },
              { id: 'room-1-name', component: 'Column', children: ['room-1-title', 'room-1-size'] },
              { id: 'room-1-title', component: 'Text', text: 'Deluxe King Room', variant: 'h3' },
              { id: 'room-1-size', component: 'Text', text: '35 m² · City view · King bed', variant: 'caption' },
              { id: 'room-1-price', component: 'Column', children: ['room-1-rate', 'room-1-total'] },
              { id: 'room-1-rate', component: 'Text', text: '€189 / night', variant: 'h4' },
              { id: 'room-1-total', component: 'Text', text: '€756 total', variant: 'caption' },
              { id: 'room-1-amenities', component: 'Row', children: ['r1-a1', 'r1-a2', 'r1-a3', 'r1-a4'] },
              { id: 'r1-a1', component: 'Badge', text: 'WiFi' },
              { id: 'r1-a2', component: 'Badge', text: 'Minibar' },
              { id: 'r1-a3', component: 'Badge', text: 'Rain Shower' },
              { id: 'r1-a4', component: 'Badge', text: 'Room Safe' },
              { id: 'room-1-actions', component: 'Row', children: ['room-1-gallery', 'room-1-book'] },
              { id: 'room-1-gallery', component: 'Button', text: 'View Gallery', action: { event: { name: 'gallery_deluxe' } } },
              { id: 'room-1-book', component: 'Button', text: 'Select Room', variant: 'primary', action: { event: { name: 'book_deluxe' } } },

              // Room 2: Suite
              { id: 'room-2-card', component: 'Card', child: 'room-2-col' },
              { id: 'room-2-col', component: 'Column', children: ['room-2-img', 'room-2-info', 'room-2-amenities', 'room-2-actions'] },
              { id: 'room-2-img', component: 'Image', url: 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?w=600&h=300&fit=crop', alt: 'Junior Suite' },
              { id: 'room-2-info', component: 'Row', children: ['room-2-name', 'room-2-price'] },
              { id: 'room-2-name', component: 'Column', children: ['room-2-title', 'room-2-size'] },
              { id: 'room-2-title', component: 'Text', text: 'Junior Suite', variant: 'h3' },
              { id: 'room-2-size', component: 'Text', text: '52 m² · Sea view · King bed + sofa', variant: 'caption' },
              { id: 'room-2-price', component: 'Column', children: ['room-2-rate', 'room-2-total'] },
              { id: 'room-2-rate', component: 'Text', text: '€295 / night', variant: 'h4' },
              { id: 'room-2-total', component: 'Text', text: '€1,180 total', variant: 'caption' },
              { id: 'room-2-amenities', component: 'Row', children: ['r2-a1', 'r2-a2', 'r2-a3', 'r2-a4', 'r2-a5'] },
              { id: 'r2-a1', component: 'Badge', text: 'WiFi' },
              { id: 'r2-a2', component: 'Badge', text: 'Minibar' },
              { id: 'r2-a3', component: 'Badge', text: 'Bathtub' },
              { id: 'r2-a4', component: 'Badge', text: 'Balcony' },
              { id: 'r2-a5', component: 'Badge', text: 'Lounge Access' },
              { id: 'room-2-actions', component: 'Row', children: ['room-2-gallery', 'room-2-book'] },
              { id: 'room-2-gallery', component: 'Button', text: 'View Gallery', action: { event: { name: 'gallery_suite' } } },
              { id: 'room-2-book', component: 'Button', text: 'Select Room', variant: 'primary', action: { event: { name: 'book_suite' } } },

              // Room 3: Presidential
              { id: 'room-3-card', component: 'Card', child: 'room-3-col' },
              { id: 'room-3-col', component: 'Column', children: ['room-3-img', 'room-3-info', 'room-3-amenities', 'room-3-actions'] },
              { id: 'room-3-img', component: 'Image', url: 'https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=600&h=300&fit=crop', alt: 'Presidential Suite' },
              { id: 'room-3-info', component: 'Row', children: ['room-3-name', 'room-3-price'] },
              { id: 'room-3-name', component: 'Column', children: ['room-3-title', 'room-3-size', 'room-3-badge'] },
              { id: 'room-3-title', component: 'Text', text: 'Presidential Suite', variant: 'h3' },
              { id: 'room-3-size', component: 'Text', text: '95 m² · Panoramic sea view · 2 bedrooms', variant: 'caption' },
              { id: 'room-3-badge', component: 'Badge', text: 'Last available' },
              { id: 'room-3-price', component: 'Column', children: ['room-3-rate', 'room-3-total'] },
              { id: 'room-3-rate', component: 'Text', text: '€520 / night', variant: 'h4' },
              { id: 'room-3-total', component: 'Text', text: '€2,080 total', variant: 'caption' },
              { id: 'room-3-amenities', component: 'Row', children: ['r3-a1', 'r3-a2', 'r3-a3', 'r3-a4', 'r3-a5', 'r3-a6'] },
              { id: 'r3-a1', component: 'Badge', text: 'WiFi' },
              { id: 'r3-a2', component: 'Badge', text: 'Butler Service' },
              { id: 'r3-a3', component: 'Badge', text: 'Private Terrace' },
              { id: 'r3-a4', component: 'Badge', text: 'Jacuzzi' },
              { id: 'r3-a5', component: 'Badge', text: 'Lounge Access' },
              { id: 'r3-a6', component: 'Badge', text: 'Airport Transfer' },
              { id: 'room-3-actions', component: 'Row', children: ['room-3-gallery', 'room-3-book'] },
              { id: 'room-3-gallery', component: 'Button', text: 'View Gallery', action: { event: { name: 'gallery_presidential' } } },
              { id: 'room-3-book', component: 'Button', text: 'Select Room', variant: 'primary', action: { event: { name: 'book_presidential' } } },
            ],
          },
        },

        'preset-booking': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'steps-row', 'divider-1', 'booking-card', 'guest-card', 'extras-card', 'divider-2', 'total-card', 'confirm-btn'] },

              { id: 'header', component: 'Text', text: 'Complete Your Booking', variant: 'h2' },
              { id: 'steps-row', component: 'Row', children: ['step-1', 'step-2', 'step-3'] },
              { id: 'step-1', component: 'Badge', text: '1. Room ✓' },
              { id: 'step-2', component: 'Badge', text: '2. Details' },
              { id: 'step-3', component: 'Text', text: '3. Payment', variant: 'caption' },
              { id: 'divider-1', component: 'Divider' },

              // Booking summary
              { id: 'booking-card', component: 'Card', child: 'booking-col' },
              { id: 'booking-col', component: 'Column', children: ['booking-title', 'booking-room', 'booking-dates', 'booking-guests', 'booking-rate'] },
              { id: 'booking-title', component: 'Text', text: 'Booking Summary', variant: 'h3' },
              { id: 'booking-room', component: 'Row', children: ['booking-room-label', 'booking-room-val'] },
              { id: 'booking-room-label', component: 'Text', text: 'Room:' },
              { id: 'booking-room-val', component: 'Text', text: 'Junior Suite — Sea View' },
              { id: 'booking-dates', component: 'Row', children: ['booking-dates-label', 'booking-dates-val'] },
              { id: 'booking-dates-label', component: 'Text', text: 'Dates:' },
              { id: 'booking-dates-val', component: 'Text', text: 'Mar 5–9, 2026 (4 nights)' },
              { id: 'booking-guests', component: 'Row', children: ['booking-guests-label', 'booking-guests-val'] },
              { id: 'booking-guests-label', component: 'Text', text: 'Guests:' },
              { id: 'booking-guests-val', component: 'Text', text: '2 Adults' },
              { id: 'booking-rate', component: 'Row', children: ['booking-rate-label', 'booking-rate-val'] },
              { id: 'booking-rate-label', component: 'Text', text: 'Rate:' },
              { id: 'booking-rate-val', component: 'Text', text: '€295 / night' },

              // Guest details
              { id: 'guest-card', component: 'Card', child: 'guest-col' },
              { id: 'guest-col', component: 'Column', children: ['guest-title', 'guest-name-row', 'guest-email', 'guest-phone', 'guest-requests'] },
              { id: 'guest-title', component: 'Text', text: 'Guest Details', variant: 'h3' },
              { id: 'guest-name-row', component: 'Row', children: ['guest-first', 'guest-last'] },
              { id: 'guest-first', component: 'TextField', label: 'First Name', placeholder: 'Jane' },
              { id: 'guest-last', component: 'TextField', label: 'Last Name', placeholder: 'Doe' },
              { id: 'guest-email', component: 'TextField', label: 'Email', placeholder: 'jane@example.com', variant: 'shortText' },
              { id: 'guest-phone', component: 'TextField', label: 'Phone', placeholder: '+1 (555) 000-0000', variant: 'shortText' },
              { id: 'guest-requests', component: 'TextArea', label: 'Special Requests', placeholder: 'Early check-in, extra pillows, dietary needs...' },

              // Extras
              { id: 'extras-card', component: 'Card', child: 'extras-col' },
              { id: 'extras-col', component: 'Column', children: ['extras-title', 'extra-breakfast', 'extra-parking', 'extra-transfer', 'extra-late'] },
              { id: 'extras-title', component: 'Text', text: 'Add-ons', variant: 'h3' },
              { id: 'extra-breakfast', component: 'CheckBox', label: 'Breakfast buffet — €25/person/day' },
              { id: 'extra-parking', component: 'CheckBox', label: 'Valet parking — €35/day' },
              { id: 'extra-transfer', component: 'CheckBox', label: 'Airport transfer (round trip) — €90' },
              { id: 'extra-late', component: 'CheckBox', label: 'Late checkout (14:00) — €50' },

              { id: 'divider-2', component: 'Divider' },

              // Total
              { id: 'total-card', component: 'Card', child: 'total-col' },
              { id: 'total-col', component: 'Column', children: ['total-room-row', 'total-tax-row', 'total-line', 'total-total-row'] },
              { id: 'total-room-row', component: 'Row', children: ['total-room-label', 'total-room-val'] },
              { id: 'total-room-label', component: 'Text', text: 'Room (4 nights × €295)' },
              { id: 'total-room-val', component: 'Text', text: '€1,180' },
              { id: 'total-tax-row', component: 'Row', children: ['total-tax-label', 'total-tax-val'] },
              { id: 'total-tax-label', component: 'Text', text: 'Taxes & fees' },
              { id: 'total-tax-val', component: 'Text', text: '€142' },
              { id: 'total-line', component: 'Divider' },
              { id: 'total-total-row', component: 'Row', children: ['total-total-label', 'total-total-val'] },
              { id: 'total-total-label', component: 'Text', text: 'Total', variant: 'h3' },
              { id: 'total-total-val', component: 'Text', text: '€1,322', variant: 'h3' },

              { id: 'confirm-btn', component: 'Button', text: 'Continue to Payment', variant: 'primary', action: { event: { name: 'continue_payment' } } },
            ],
          },
        },

        // ── Interactive: Step Wizard ──

        'preset-wizard': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'steps', 'divider-1', 'step-content', 'divider-2', 'nav-row'] },
              { id: 'header', component: 'Text', text: 'Create New Project', variant: 'h2' },
              { id: 'steps', component: 'Row', children: ['step-1', 'step-sep-1', 'step-2', 'step-sep-2', 'step-3'] },
              { id: 'step-1', component: 'Badge', text: '1. Details' },
              { id: 'step-sep-1', component: 'Text', text: '→' },
              { id: 'step-2', component: 'Text', text: '2. Team', variant: 'caption' },
              { id: 'step-sep-2', component: 'Text', text: '→' },
              { id: 'step-3', component: 'Text', text: '3. Review', variant: 'caption' },
              { id: 'divider-1', component: 'Divider' },
              { id: 'step-content', component: 'Column', children: ['proj-name', 'proj-desc', 'proj-visibility'] },
              { id: 'proj-name', component: 'TextField', label: 'Project Name', placeholder: 'My Awesome Project' },
              { id: 'proj-desc', component: 'TextArea', label: 'Description', placeholder: 'What is this project about?' },
              { id: 'proj-visibility', component: 'Column', children: ['vis-label', 'vis-public', 'vis-private'] },
              { id: 'vis-label', component: 'Text', text: 'Visibility', variant: 'caption' },
              { id: 'vis-public', component: 'CheckBox', label: 'Public — anyone can view' },
              { id: 'vis-private', component: 'CheckBox', label: 'Private — invited members only' },
              { id: 'divider-2', component: 'Divider' },
              { id: 'nav-row', component: 'Row', children: ['cancel-btn', 'next-btn'] },
              { id: 'cancel-btn', component: 'Button', text: 'Cancel', action: { event: { name: 'wizard_cancel' } } },
              { id: 'next-btn', component: 'Button', text: 'Next: Team →', variant: 'primary', action: { event: { name: 'wizard_next' } } },
            ],
          },
        },

        // ── Interactive: Confirm Dialog ──

        'preset-confirm-delete': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Card', child: 'card-col' },
              { id: 'card-col', component: 'Column', children: ['icon-row', 'title', 'desc', 'item-name', 'warning', 'confirm-field', 'actions'] },
              { id: 'icon-row', component: 'Row', children: ['warn-badge'] },
              { id: 'warn-badge', component: 'Badge', text: 'Destructive Action' },
              { id: 'title', component: 'Text', text: 'Delete Project?', variant: 'h2' },
              { id: 'desc', component: 'Text', text: 'This will permanently delete the project, all its files, issues, and associated data. This action cannot be undone.' },
              { id: 'item-name', component: 'Row', children: ['item-label', 'item-val'] },
              { id: 'item-label', component: 'Text', text: 'Project:' },
              { id: 'item-val', component: 'Text', text: 'acme-frontend', variant: 'h4' },
              { id: 'warning', component: 'Text', text: 'To confirm, type the project name below:', variant: 'caption' },
              { id: 'confirm-field', component: 'TextField', placeholder: 'acme-frontend' },
              { id: 'actions', component: 'Row', children: ['cancel-btn', 'delete-btn'] },
              { id: 'cancel-btn', component: 'Button', text: 'Cancel', action: { event: { name: 'cancel_delete' } } },
              { id: 'delete-btn', component: 'Button', text: 'Delete Project', variant: 'primary', disabled: true, action: { event: { name: 'confirm_delete' } } },
            ],
          },
        },

        // ── Interactive: Settings Panel ──

        'preset-toggle-settings': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'desc', 'divider-1', 'notif-section', 'divider-2', 'privacy-section', 'divider-3', 'appearance-section', 'divider-4', 'save-row'] },
              { id: 'header', component: 'Text', text: 'Preferences', variant: 'h2' },
              { id: 'desc', component: 'Text', text: 'Manage your notification, privacy, and display settings.', variant: 'caption' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'notif-section', component: 'Column', children: ['notif-title', 'notif-email', 'notif-push', 'notif-sms', 'notif-marketing'] },
              { id: 'notif-title', component: 'Text', text: 'Notifications', variant: 'h3' },
              { id: 'notif-email', component: 'Switch', label: 'Email notifications' },
              { id: 'notif-push', component: 'Switch', label: 'Push notifications' },
              { id: 'notif-sms', component: 'Switch', label: 'SMS alerts' },
              { id: 'notif-marketing', component: 'Switch', label: 'Marketing emails' },
              { id: 'divider-2', component: 'Divider' },

              { id: 'privacy-section', component: 'Column', children: ['privacy-title', 'priv-profile', 'priv-activity', 'priv-search'] },
              { id: 'privacy-title', component: 'Text', text: 'Privacy', variant: 'h3' },
              { id: 'priv-profile', component: 'Switch', label: 'Public profile' },
              { id: 'priv-activity', component: 'Switch', label: 'Show activity status' },
              { id: 'priv-search', component: 'Switch', label: 'Appear in search results' },
              { id: 'divider-3', component: 'Divider' },

              { id: 'appearance-section', component: 'Column', children: ['appear-title', 'appear-compact', 'appear-animations'] },
              { id: 'appear-title', component: 'Text', text: 'Appearance', variant: 'h3' },
              { id: 'appear-compact', component: 'Switch', label: 'Compact mode' },
              { id: 'appear-animations', component: 'Switch', label: 'Reduce animations' },
              { id: 'divider-4', component: 'Divider' },

              { id: 'save-row', component: 'Row', children: ['reset-btn', 'save-btn'] },
              { id: 'reset-btn', component: 'Button', text: 'Reset to Defaults', action: { event: { name: 'reset_settings' } } },
              { id: 'save-btn', component: 'Button', text: 'Save Preferences', variant: 'primary', action: { event: { name: 'save_settings' } } },
            ],
          },
        },

        // ── Clinical: Vitals Monitor ──

        'preset-vitals': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'patient-row', 'divider-1', 'vitals-row', 'divider-2', 'trend-card', 'divider-3', 'alert-card', 'actions'] },

              { id: 'header', component: 'Text', text: 'Patient Vitals — Real-Time', variant: 'h2' },
              { id: 'patient-row', component: 'Row', children: ['patient-name', 'patient-mrn', 'patient-loc'] },
              { id: 'patient-name', component: 'Text', text: 'Robert Chen, 67M' },
              { id: 'patient-mrn', component: 'Badge', text: 'MRN: 4820193' },
              { id: 'patient-loc', component: 'Badge', text: 'ICU Bed 3' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'vitals-row', component: 'Row', children: ['vital-hr', 'vital-bp', 'vital-spo2', 'vital-temp', 'vital-rr'] },
              { id: 'vital-hr', component: 'Card', child: 'hr-col' },
              { id: 'hr-col', component: 'Column', children: ['hr-label', 'hr-val', 'hr-unit'] },
              { id: 'hr-label', component: 'Text', text: 'Heart Rate', variant: 'caption' },
              { id: 'hr-val', component: 'Text', text: '82', variant: 'h2' },
              { id: 'hr-unit', component: 'Text', text: 'bpm', variant: 'caption' },
              { id: 'vital-bp', component: 'Card', child: 'bp-col' },
              { id: 'bp-col', component: 'Column', children: ['bp-label', 'bp-val', 'bp-unit'] },
              { id: 'bp-label', component: 'Text', text: 'Blood Pressure', variant: 'caption' },
              { id: 'bp-val', component: 'Text', text: '138/86', variant: 'h2' },
              { id: 'bp-unit', component: 'Text', text: 'mmHg ↑', variant: 'caption' },
              { id: 'vital-spo2', component: 'Card', child: 'spo2-col' },
              { id: 'spo2-col', component: 'Column', children: ['spo2-label', 'spo2-val', 'spo2-unit'] },
              { id: 'spo2-label', component: 'Text', text: 'SpO₂', variant: 'caption' },
              { id: 'spo2-val', component: 'Text', text: '96', variant: 'h2' },
              { id: 'spo2-unit', component: 'Text', text: '%', variant: 'caption' },
              { id: 'vital-temp', component: 'Card', child: 'temp-col' },
              { id: 'temp-col', component: 'Column', children: ['temp-label', 'temp-val', 'temp-unit'] },
              { id: 'temp-label', component: 'Text', text: 'Temperature', variant: 'caption' },
              { id: 'temp-val', component: 'Text', text: '37.2', variant: 'h2' },
              { id: 'temp-unit', component: 'Text', text: '°C', variant: 'caption' },
              { id: 'vital-rr', component: 'Card', child: 'rr-col' },
              { id: 'rr-col', component: 'Column', children: ['rr-label', 'rr-val', 'rr-unit'] },
              { id: 'rr-label', component: 'Text', text: 'Resp Rate', variant: 'caption' },
              { id: 'rr-val', component: 'Text', text: '18', variant: 'h2' },
              { id: 'rr-unit', component: 'Text', text: 'breaths/min', variant: 'caption' },
              { id: 'divider-2', component: 'Divider' },

              { id: 'trend-card', component: 'Card', child: 'trend-col' },
              { id: 'trend-col', component: 'Column', children: ['trend-title', 'trend-bp', 'trend-hr', 'trend-spo2'] },
              { id: 'trend-title', component: 'Text', text: '24h Trends', variant: 'h3' },
              { id: 'trend-bp', component: 'Text', text: 'BP: 142/90 → 138/86 (improving)' },
              { id: 'trend-hr', component: 'Text', text: 'HR: 94 → 82 (stabilizing)' },
              { id: 'trend-spo2', component: 'Text', text: 'SpO₂: 93% → 96% (improving on 2L O₂)' },
              { id: 'divider-3', component: 'Divider' },

              { id: 'alert-card', component: 'Card', child: 'alert-col' },
              { id: 'alert-col', component: 'Column', children: ['alert-title', 'alert-1', 'alert-2'] },
              { id: 'alert-title', component: 'Text', text: 'Active Alerts', variant: 'h3' },
              { id: 'alert-1', component: 'Row', children: ['alert-1-badge', 'alert-1-text'] },
              { id: 'alert-1-badge', component: 'Badge', text: 'Warning' },
              { id: 'alert-1-text', component: 'Text', text: 'BP above target range (goal < 130/80)' },
              { id: 'alert-2', component: 'Row', children: ['alert-2-badge', 'alert-2-text'] },
              { id: 'alert-2-badge', component: 'Badge', text: 'Info' },
              { id: 'alert-2-text', component: 'Text', text: 'Next vitals check due at 14:00' },

              { id: 'actions', component: 'Row', children: ['chart-btn', 'order-btn', 'note-btn'] },
              { id: 'chart-btn', component: 'Button', text: 'Full Chart', action: { event: { name: 'view_chart' } } },
              { id: 'order-btn', component: 'Button', text: 'New Order', variant: 'primary', action: { event: { name: 'new_order' } } },
              { id: 'note-btn', component: 'Button', text: 'Add Note', action: { event: { name: 'add_note' } } },
            ],
          },
        },

        // ── Clinical: Medication Reconciliation ──

        'preset-med-reconciliation': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'patient-row', 'divider-1', 'active-card', 'divider-2', 'discontinued-card', 'divider-3', 'interaction-card', 'actions'] },

              { id: 'header', component: 'Text', text: 'Medication Reconciliation', variant: 'h2' },
              { id: 'patient-row', component: 'Row', children: ['pt-name', 'pt-allergies'] },
              { id: 'pt-name', component: 'Text', text: 'Maria Garcia, 54F' },
              { id: 'pt-allergies', component: 'Badge', text: 'Allergies: Penicillin, Sulfa' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'active-card', component: 'Card', child: 'active-col' },
              { id: 'active-col', component: 'Column', children: ['active-title', 'med-1', 'med-2', 'med-3', 'med-4', 'med-5'] },
              { id: 'active-title', component: 'Text', text: 'Active Medications', variant: 'h3' },
              { id: 'med-1', component: 'Row', children: ['med-1-check', 'med-1-col'] },
              { id: 'med-1-check', component: 'CheckBox', label: '' },
              { id: 'med-1-col', component: 'Column', children: ['med-1-name', 'med-1-detail'] },
              { id: 'med-1-name', component: 'Text', text: 'Metformin 500mg' },
              { id: 'med-1-detail', component: 'Text', text: 'Twice daily with meals · Diabetes type 2', variant: 'caption' },
              { id: 'med-2', component: 'Row', children: ['med-2-check', 'med-2-col'] },
              { id: 'med-2-check', component: 'CheckBox', label: '' },
              { id: 'med-2-col', component: 'Column', children: ['med-2-name', 'med-2-detail'] },
              { id: 'med-2-name', component: 'Text', text: 'Lisinopril 10mg' },
              { id: 'med-2-detail', component: 'Text', text: 'Once daily · Hypertension', variant: 'caption' },
              { id: 'med-3', component: 'Row', children: ['med-3-check', 'med-3-col'] },
              { id: 'med-3-check', component: 'CheckBox', label: '' },
              { id: 'med-3-col', component: 'Column', children: ['med-3-name', 'med-3-detail'] },
              { id: 'med-3-name', component: 'Text', text: 'Atorvastatin 20mg' },
              { id: 'med-3-detail', component: 'Text', text: 'Once daily at bedtime · Hyperlipidemia', variant: 'caption' },
              { id: 'med-4', component: 'Row', children: ['med-4-check', 'med-4-col'] },
              { id: 'med-4-check', component: 'CheckBox', label: '' },
              { id: 'med-4-col', component: 'Column', children: ['med-4-name', 'med-4-detail'] },
              { id: 'med-4-name', component: 'Text', text: 'Omeprazole 20mg' },
              { id: 'med-4-detail', component: 'Text', text: 'Once daily before breakfast · GERD', variant: 'caption' },
              { id: 'med-5', component: 'Row', children: ['med-5-check', 'med-5-col'] },
              { id: 'med-5-check', component: 'CheckBox', label: '' },
              { id: 'med-5-col', component: 'Column', children: ['med-5-name', 'med-5-detail'] },
              { id: 'med-5-name', component: 'Text', text: 'Aspirin 81mg' },
              { id: 'med-5-detail', component: 'Text', text: 'Once daily · Cardiovascular prophylaxis', variant: 'caption' },
              { id: 'divider-2', component: 'Divider' },

              { id: 'discontinued-card', component: 'Card', child: 'disc-col' },
              { id: 'disc-col', component: 'Column', children: ['disc-title', 'disc-1', 'disc-2'] },
              { id: 'disc-title', component: 'Text', text: 'Recently Discontinued', variant: 'h3' },
              { id: 'disc-1', component: 'Row', children: ['disc-1-name', 'disc-1-reason'] },
              { id: 'disc-1-name', component: 'Text', text: 'Glipizide 5mg' },
              { id: 'disc-1-reason', component: 'Text', text: 'Replaced by Metformin (Feb 1)', variant: 'caption' },
              { id: 'disc-2', component: 'Row', children: ['disc-2-name', 'disc-2-reason'] },
              { id: 'disc-2-name', component: 'Text', text: 'Ibuprofen 400mg PRN' },
              { id: 'disc-2-reason', component: 'Text', text: 'Renal concern — switch to acetaminophen (Jan 15)', variant: 'caption' },
              { id: 'divider-3', component: 'Divider' },

              { id: 'interaction-card', component: 'Card', child: 'int-col' },
              { id: 'int-col', component: 'Column', children: ['int-title', 'int-1'] },
              { id: 'int-title', component: 'Text', text: 'Drug Interactions', variant: 'h3' },
              { id: 'int-1', component: 'Row', children: ['int-1-badge', 'int-1-text'] },
              { id: 'int-1-badge', component: 'Badge', text: 'Low Risk' },
              { id: 'int-1-text', component: 'Text', text: 'Aspirin + Lisinopril: may reduce antihypertensive effect. Monitor BP.' },

              { id: 'actions', component: 'Row', children: ['reconcile-btn', 'add-med-btn', 'print-btn'] },
              { id: 'reconcile-btn', component: 'Button', text: 'Confirm Reconciliation', variant: 'primary', action: { event: { name: 'confirm_reconciliation' } } },
              { id: 'add-med-btn', component: 'Button', text: 'Add Medication', action: { event: { name: 'add_medication' } } },
              { id: 'print-btn', component: 'Button', text: 'Print List', action: { event: { name: 'print_med_list' } } },
            ],
          },
        },

        // ── Clinical: Referral Form ──

        'preset-referral': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'urgency-row', 'divider-1', 'patient-card', 'refer-card', 'clinical-card', 'divider-2', 'actions'] },

              { id: 'header', component: 'Text', text: 'Specialist Referral', variant: 'h2' },
              { id: 'urgency-row', component: 'Row', children: ['urgency-label', 'urgency-badge'] },
              { id: 'urgency-label', component: 'Text', text: 'Priority:' },
              { id: 'urgency-badge', component: 'Badge', text: 'Routine' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'patient-card', component: 'Card', child: 'patient-col' },
              { id: 'patient-col', component: 'Column', children: ['patient-title', 'patient-name-row', 'patient-dob-row', 'patient-insurance'] },
              { id: 'patient-title', component: 'Text', text: 'Patient Information', variant: 'h3' },
              { id: 'patient-name-row', component: 'Row', children: ['pt-name-label', 'pt-name-val'] },
              { id: 'pt-name-label', component: 'Text', text: 'Patient:' },
              { id: 'pt-name-val', component: 'Text', text: 'James Wilson, 45M' },
              { id: 'patient-dob-row', component: 'Row', children: ['pt-dob-label', 'pt-dob-val'] },
              { id: 'pt-dob-label', component: 'Text', text: 'DOB:' },
              { id: 'pt-dob-val', component: 'Text', text: '1981-06-22' },
              { id: 'patient-insurance', component: 'Row', children: ['pt-ins-label', 'pt-ins-val'] },
              { id: 'pt-ins-label', component: 'Text', text: 'Insurance:' },
              { id: 'pt-ins-val', component: 'Text', text: 'Blue Cross PPO — ID: BCX-4829173' },

              { id: 'refer-card', component: 'Card', child: 'refer-col' },
              { id: 'refer-col', component: 'Column', children: ['refer-title', 'refer-specialty', 'refer-provider', 'refer-reason'] },
              { id: 'refer-title', component: 'Text', text: 'Referral Details', variant: 'h3' },
              { id: 'refer-specialty', component: 'TextField', label: 'Specialty', placeholder: 'e.g. Cardiology, Endocrinology' },
              { id: 'refer-provider', component: 'TextField', label: 'Preferred Provider (optional)', placeholder: 'Provider name or practice' },
              { id: 'refer-reason', component: 'TextArea', label: 'Reason for Referral', placeholder: 'Clinical indication and relevant history...' },

              { id: 'clinical-card', component: 'Card', child: 'clinical-col' },
              { id: 'clinical-col', component: 'Column', children: ['clinical-title', 'clinical-dx', 'clinical-icd', 'clinical-notes'] },
              { id: 'clinical-title', component: 'Text', text: 'Clinical Information', variant: 'h3' },
              { id: 'clinical-dx', component: 'TextField', label: 'Primary Diagnosis', placeholder: 'e.g. Persistent atrial fibrillation' },
              { id: 'clinical-icd', component: 'TextField', label: 'ICD-10 Code', placeholder: 'e.g. I48.1' },
              { id: 'clinical-notes', component: 'TextArea', label: 'Additional Notes', placeholder: 'Relevant labs, imaging, prior treatments...' },
              { id: 'divider-2', component: 'Divider' },

              { id: 'actions', component: 'Row', children: ['submit-btn', 'save-draft-btn', 'cancel-btn'] },
              { id: 'submit-btn', component: 'Button', text: 'Submit Referral', variant: 'primary', action: { event: { name: 'submit_referral' } } },
              { id: 'save-draft-btn', component: 'Button', text: 'Save Draft', action: { event: { name: 'save_draft' } } },
              { id: 'cancel-btn', component: 'Button', text: 'Cancel', action: { event: { name: 'cancel_referral' } } },
            ],
          },
        },

        // ── Clinical: ICD-10 Lookup ──

        'preset-icd-lookup': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'search-row', 'divider-1', 'results-card', 'divider-2', 'detail-card'] },

              { id: 'header', component: 'Text', text: 'ICD-10-CM Code Lookup', variant: 'h2' },
              { id: 'search-row', component: 'Row', children: ['search-field', 'search-btn'] },
              { id: 'search-field', component: 'TextField', label: 'Search by code or description', placeholder: 'e.g. E11.65 or "type 2 diabetes"' },
              { id: 'search-btn', component: 'Button', text: 'Search', variant: 'primary', action: { event: { name: 'icd_search' } } },
              { id: 'divider-1', component: 'Divider' },

              { id: 'results-card', component: 'Card', child: 'results-col' },
              { id: 'results-col', component: 'Column', children: ['results-title', 'results-count', 'result-list'] },
              { id: 'results-title', component: 'Text', text: 'Results for "type 2 diabetes"', variant: 'h3' },
              { id: 'results-count', component: 'Badge', text: '8 matches' },
              { id: 'result-list', component: 'List', children: ['r1', 'r2', 'r3', 'r4', 'r5'] },
              { id: 'r1', component: 'ListItem', text: 'E11.9 — Type 2 diabetes mellitus without complications', value: 'E11.9' },
              { id: 'r2', component: 'ListItem', text: 'E11.65 — Type 2 DM with hyperglycemia', value: 'E11.65' },
              { id: 'r3', component: 'ListItem', text: 'E11.22 — Type 2 DM with diabetic chronic kidney disease', value: 'E11.22' },
              { id: 'r4', component: 'ListItem', text: 'E11.40 — Type 2 DM with diabetic neuropathy, unspecified', value: 'E11.40' },
              { id: 'r5', component: 'ListItem', text: 'E11.319 — Type 2 DM with unspecified diabetic retinopathy', value: 'E11.319' },
              { id: 'divider-2', component: 'Divider' },

              { id: 'detail-card', component: 'Card', child: 'detail-col' },
              { id: 'detail-col', component: 'Column', children: ['detail-title', 'detail-code', 'detail-desc', 'detail-billable', 'detail-category', 'detail-parent', 'detail-actions'] },
              { id: 'detail-title', component: 'Text', text: 'Code Detail', variant: 'h3' },
              { id: 'detail-code', component: 'Row', children: ['code-label', 'code-val'] },
              { id: 'code-label', component: 'Text', text: 'Code:' },
              { id: 'code-val', component: 'Text', text: 'E11.65', variant: 'h4' },
              { id: 'detail-desc', component: 'Row', children: ['desc-label', 'desc-val'] },
              { id: 'desc-label', component: 'Text', text: 'Description:' },
              { id: 'desc-val', component: 'Text', text: 'Type 2 diabetes mellitus with hyperglycemia' },
              { id: 'detail-billable', component: 'Row', children: ['bill-label', 'bill-badge'] },
              { id: 'bill-label', component: 'Text', text: 'Status:' },
              { id: 'bill-badge', component: 'Badge', text: 'Billable' },
              { id: 'detail-category', component: 'Row', children: ['cat-label', 'cat-val'] },
              { id: 'cat-label', component: 'Text', text: 'Category:' },
              { id: 'cat-val', component: 'Text', text: 'E11 — Type 2 diabetes mellitus' },
              { id: 'detail-parent', component: 'Row', children: ['parent-label', 'parent-val'] },
              { id: 'parent-label', component: 'Text', text: 'Chapter:' },
              { id: 'parent-val', component: 'Text', text: 'IV — Endocrine, nutritional and metabolic diseases (E00-E89)' },
              { id: 'detail-actions', component: 'Row', children: ['use-code-btn', 'related-btn'] },
              { id: 'use-code-btn', component: 'Button', text: 'Use This Code', variant: 'primary', action: { event: { name: 'use_icd_code', context: { code: 'E11.65' } } } },
              { id: 'related-btn', component: 'Button', text: 'Related Codes', action: { event: { name: 'related_codes' } } },
            ],
          },
        },

        // ── Clinical: Patient Intake ──

        'preset-patient-intake': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'progress-row', 'divider-1', 'demographics-card', 'insurance-card', 'history-card', 'divider-2', 'actions'] },

              { id: 'header', component: 'Text', text: 'Patient Intake Form', variant: 'h2' },
              { id: 'progress-row', component: 'Row', children: ['prog-1', 'prog-2', 'prog-3'] },
              { id: 'prog-1', component: 'Badge', text: '1. Demographics' },
              { id: 'prog-2', component: 'Text', text: '2. Insurance', variant: 'caption' },
              { id: 'prog-3', component: 'Text', text: '3. Medical History', variant: 'caption' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'demographics-card', component: 'Card', child: 'demo-col' },
              { id: 'demo-col', component: 'Column', children: ['demo-title', 'demo-name-row', 'demo-dob-row', 'demo-address', 'demo-phone', 'demo-email', 'demo-emergency'] },
              { id: 'demo-title', component: 'Text', text: 'Demographics', variant: 'h3' },
              { id: 'demo-name-row', component: 'Row', children: ['demo-first', 'demo-last'] },
              { id: 'demo-first', component: 'TextField', label: 'First Name', placeholder: 'First' },
              { id: 'demo-last', component: 'TextField', label: 'Last Name', placeholder: 'Last' },
              { id: 'demo-dob-row', component: 'Row', children: ['demo-dob', 'demo-sex'] },
              { id: 'demo-dob', component: 'TextField', label: 'Date of Birth', placeholder: 'YYYY-MM-DD' },
              { id: 'demo-sex', component: 'TextField', label: 'Sex at Birth', placeholder: 'M / F / Other' },
              { id: 'demo-address', component: 'TextField', label: 'Address', placeholder: '123 Main St, City, State ZIP' },
              { id: 'demo-phone', component: 'TextField', label: 'Phone', placeholder: '(555) 000-0000' },
              { id: 'demo-email', component: 'TextField', label: 'Email', placeholder: 'patient@email.com' },
              { id: 'demo-emergency', component: 'TextField', label: 'Emergency Contact', placeholder: 'Name — Relationship — Phone' },

              { id: 'insurance-card', component: 'Card', child: 'ins-col' },
              { id: 'ins-col', component: 'Column', children: ['ins-title', 'ins-carrier', 'ins-id', 'ins-group'] },
              { id: 'ins-title', component: 'Text', text: 'Insurance', variant: 'h3' },
              { id: 'ins-carrier', component: 'TextField', label: 'Insurance Carrier', placeholder: 'e.g. Blue Cross Blue Shield' },
              { id: 'ins-id', component: 'TextField', label: 'Member ID', placeholder: 'ID number on your card' },
              { id: 'ins-group', component: 'TextField', label: 'Group Number', placeholder: 'Group number on your card' },

              { id: 'history-card', component: 'Card', child: 'hist-col' },
              { id: 'hist-col', component: 'Column', children: ['hist-title', 'hist-conditions', 'hist-surgeries', 'hist-allergies', 'hist-meds'] },
              { id: 'hist-title', component: 'Text', text: 'Medical History', variant: 'h3' },
              { id: 'hist-conditions', component: 'TextArea', label: 'Current Conditions', placeholder: 'List any chronic conditions or diagnoses...' },
              { id: 'hist-surgeries', component: 'TextArea', label: 'Past Surgeries', placeholder: 'List any prior surgeries and approximate dates...' },
              { id: 'hist-allergies', component: 'TextField', label: 'Allergies', placeholder: 'Drug, food, or environmental allergies' },
              { id: 'hist-meds', component: 'TextArea', label: 'Current Medications', placeholder: 'List all medications, doses, and frequency...' },
              { id: 'divider-2', component: 'Divider' },

              { id: 'actions', component: 'Row', children: ['submit-btn', 'save-btn'] },
              { id: 'submit-btn', component: 'Button', text: 'Submit Intake Form', variant: 'primary', action: { event: { name: 'submit_intake' } } },
              { id: 'save-btn', component: 'Button', text: 'Save Progress', action: { event: { name: 'save_intake' } } },
            ],
          },
        },

        // ── Clinical: Prior Authorization Status ──

        'preset-prior-auth': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'divider-1', 'auth-1-card', 'auth-2-card', 'auth-3-card', 'divider-2', 'new-auth-btn'] },

              { id: 'header', component: 'Text', text: 'Prior Authorization Tracker', variant: 'h2' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'auth-1-card', component: 'Card', child: 'auth-1-col' },
              { id: 'auth-1-col', component: 'Column', children: ['auth-1-header', 'auth-1-details', 'auth-1-timeline'] },
              { id: 'auth-1-header', component: 'Row', children: ['auth-1-title', 'auth-1-status'] },
              { id: 'auth-1-title', component: 'Text', text: 'MRI Lumbar Spine (CPT 72148)', variant: 'h3' },
              { id: 'auth-1-status', component: 'Badge', text: 'Approved' },
              { id: 'auth-1-details', component: 'Column', children: ['auth-1-pt', 'auth-1-payer', 'auth-1-auth-num', 'auth-1-valid'] },
              { id: 'auth-1-pt', component: 'Row', children: ['auth-1-pt-l', 'auth-1-pt-v'] },
              { id: 'auth-1-pt-l', component: 'Text', text: 'Patient:' },
              { id: 'auth-1-pt-v', component: 'Text', text: 'Sandra Kim' },
              { id: 'auth-1-payer', component: 'Row', children: ['auth-1-payer-l', 'auth-1-payer-v'] },
              { id: 'auth-1-payer-l', component: 'Text', text: 'Payer:' },
              { id: 'auth-1-payer-v', component: 'Text', text: 'Aetna PPO' },
              { id: 'auth-1-auth-num', component: 'Row', children: ['auth-1-num-l', 'auth-1-num-v'] },
              { id: 'auth-1-num-l', component: 'Text', text: 'Auth #:' },
              { id: 'auth-1-num-v', component: 'Text', text: 'PA-2026-089412' },
              { id: 'auth-1-valid', component: 'Row', children: ['auth-1-valid-l', 'auth-1-valid-v'] },
              { id: 'auth-1-valid-l', component: 'Text', text: 'Valid:' },
              { id: 'auth-1-valid-v', component: 'Text', text: 'Feb 15 – May 15, 2026' },
              { id: 'auth-1-timeline', component: 'Text', text: 'Submitted Feb 10 → Approved Feb 14 (4 days)', variant: 'caption' },

              { id: 'auth-2-card', component: 'Card', child: 'auth-2-col' },
              { id: 'auth-2-col', component: 'Column', children: ['auth-2-header', 'auth-2-details', 'auth-2-timeline', 'auth-2-actions'] },
              { id: 'auth-2-header', component: 'Row', children: ['auth-2-title', 'auth-2-status'] },
              { id: 'auth-2-title', component: 'Text', text: 'Physical Therapy (12 sessions)', variant: 'h3' },
              { id: 'auth-2-status', component: 'Badge', text: 'Pending Review' },
              { id: 'auth-2-details', component: 'Column', children: ['auth-2-pt', 'auth-2-payer', 'auth-2-dx'] },
              { id: 'auth-2-pt', component: 'Row', children: ['auth-2-pt-l', 'auth-2-pt-v'] },
              { id: 'auth-2-pt-l', component: 'Text', text: 'Patient:' },
              { id: 'auth-2-pt-v', component: 'Text', text: 'David Park' },
              { id: 'auth-2-payer', component: 'Row', children: ['auth-2-payer-l', 'auth-2-payer-v'] },
              { id: 'auth-2-payer-l', component: 'Text', text: 'Payer:' },
              { id: 'auth-2-payer-v', component: 'Text', text: 'UnitedHealthcare' },
              { id: 'auth-2-dx', component: 'Row', children: ['auth-2-dx-l', 'auth-2-dx-v'] },
              { id: 'auth-2-dx-l', component: 'Text', text: 'Diagnosis:' },
              { id: 'auth-2-dx-v', component: 'Text', text: 'M54.5 — Low back pain' },
              { id: 'auth-2-timeline', component: 'Text', text: 'Submitted Feb 18 — estimated decision by Feb 25', variant: 'caption' },
              { id: 'auth-2-actions', component: 'Row', children: ['auth-2-check-btn', 'auth-2-docs-btn'] },
              { id: 'auth-2-check-btn', component: 'Button', text: 'Check Status', variant: 'primary', action: { event: { name: 'check_auth_status' } } },
              { id: 'auth-2-docs-btn', component: 'Button', text: 'Upload Docs', action: { event: { name: 'upload_auth_docs' } } },

              { id: 'auth-3-card', component: 'Card', child: 'auth-3-col' },
              { id: 'auth-3-col', component: 'Column', children: ['auth-3-header', 'auth-3-details', 'auth-3-reason', 'auth-3-actions'] },
              { id: 'auth-3-header', component: 'Row', children: ['auth-3-title', 'auth-3-status'] },
              { id: 'auth-3-title', component: 'Text', text: 'Humira (adalimumab) — Specialty Rx', variant: 'h3' },
              { id: 'auth-3-status', component: 'Badge', text: 'Denied' },
              { id: 'auth-3-details', component: 'Column', children: ['auth-3-pt', 'auth-3-payer'] },
              { id: 'auth-3-pt', component: 'Row', children: ['auth-3-pt-l', 'auth-3-pt-v'] },
              { id: 'auth-3-pt-l', component: 'Text', text: 'Patient:' },
              { id: 'auth-3-pt-v', component: 'Text', text: 'Lisa Nguyen' },
              { id: 'auth-3-payer', component: 'Row', children: ['auth-3-payer-l', 'auth-3-payer-v'] },
              { id: 'auth-3-payer-l', component: 'Text', text: 'Payer:' },
              { id: 'auth-3-payer-v', component: 'Text', text: 'Cigna' },
              { id: 'auth-3-reason', component: 'Text', text: 'Denial reason: Step therapy not met — must trial methotrexate first. Appeal deadline: Mar 5.' },
              { id: 'auth-3-actions', component: 'Row', children: ['auth-3-appeal-btn', 'auth-3-alt-btn'] },
              { id: 'auth-3-appeal-btn', component: 'Button', text: 'File Appeal', variant: 'primary', action: { event: { name: 'file_appeal' } } },
              { id: 'auth-3-alt-btn', component: 'Button', text: 'Alternative Therapy', action: { event: { name: 'alt_therapy' } } },
              { id: 'divider-2', component: 'Divider' },

              { id: 'new-auth-btn', component: 'Button', text: 'New Prior Authorization', variant: 'primary', action: { event: { name: 'new_prior_auth' } } },
            ],
          },
        },

        // ── Clinical: Care Plan ──

        'preset-care-plan': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'patient-row', 'divider-1', 'goals-card', 'interventions-card', 'follow-up-card', 'divider-2', 'team-card', 'actions'] },

              { id: 'header', component: 'Text', text: 'Care Plan — Diabetes Management', variant: 'h2' },
              { id: 'patient-row', component: 'Row', children: ['cp-patient', 'cp-dx', 'cp-date'] },
              { id: 'cp-patient', component: 'Text', text: 'Thomas Brown, 58M' },
              { id: 'cp-dx', component: 'Badge', text: 'E11.65 — T2DM w/ hyperglycemia' },
              { id: 'cp-date', component: 'Text', text: 'Initiated: Jan 8, 2026', variant: 'caption' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'goals-card', component: 'Card', child: 'goals-col' },
              { id: 'goals-col', component: 'Column', children: ['goals-title', 'goal-1', 'goal-2', 'goal-3'] },
              { id: 'goals-title', component: 'Text', text: 'Treatment Goals', variant: 'h3' },
              { id: 'goal-1', component: 'Row', children: ['goal-1-check', 'goal-1-col'] },
              { id: 'goal-1-check', component: 'CheckBox', label: '' },
              { id: 'goal-1-col', component: 'Column', children: ['goal-1-text', 'goal-1-target'] },
              { id: 'goal-1-text', component: 'Text', text: 'HbA1c < 7.0%' },
              { id: 'goal-1-target', component: 'Text', text: 'Current: 8.2% (Jan) · Target by Jul 2026', variant: 'caption' },
              { id: 'goal-2', component: 'Row', children: ['goal-2-check', 'goal-2-col'] },
              { id: 'goal-2-check', component: 'CheckBox', label: '' },
              { id: 'goal-2-col', component: 'Column', children: ['goal-2-text', 'goal-2-target'] },
              { id: 'goal-2-text', component: 'Text', text: 'Fasting glucose 80–130 mg/dL' },
              { id: 'goal-2-target', component: 'Text', text: 'Current: 105–160 range · Improving', variant: 'caption' },
              { id: 'goal-3', component: 'Row', children: ['goal-3-check', 'goal-3-col'] },
              { id: 'goal-3-check', component: 'CheckBox', label: '' },
              { id: 'goal-3-col', component: 'Column', children: ['goal-3-text', 'goal-3-target'] },
              { id: 'goal-3-text', component: 'Text', text: 'Weight reduction 5% (target 92 kg)' },
              { id: 'goal-3-target', component: 'Text', text: 'Current: 97 kg (started 102 kg) · On track', variant: 'caption' },

              { id: 'interventions-card', component: 'Card', child: 'int-col' },
              { id: 'int-col', component: 'Column', children: ['int-title', 'int-med', 'int-diet', 'int-exercise', 'int-monitor'] },
              { id: 'int-title', component: 'Text', text: 'Interventions', variant: 'h3' },
              { id: 'int-med', component: 'Column', children: ['int-med-title', 'int-med-1', 'int-med-2'] },
              { id: 'int-med-title', component: 'Text', text: 'Medications', variant: 'caption' },
              { id: 'int-med-1', component: 'Text', text: 'Metformin 1000mg BID (titrated from 500mg)' },
              { id: 'int-med-2', component: 'Text', text: 'Empagliflozin 10mg daily (added Feb 1)' },
              { id: 'int-diet', component: 'Column', children: ['int-diet-title', 'int-diet-text'] },
              { id: 'int-diet-title', component: 'Text', text: 'Nutrition', variant: 'caption' },
              { id: 'int-diet-text', component: 'Text', text: 'Referred to dietitian · Low-glycemic meal plan · Carb counting education' },
              { id: 'int-exercise', component: 'Column', children: ['int-ex-title', 'int-ex-text'] },
              { id: 'int-ex-title', component: 'Text', text: 'Physical Activity', variant: 'caption' },
              { id: 'int-ex-text', component: 'Text', text: '150 min/week moderate aerobic · Resistance training 2x/week' },
              { id: 'int-monitor', component: 'Column', children: ['int-mon-title', 'int-mon-text'] },
              { id: 'int-mon-title', component: 'Text', text: 'Self-Monitoring', variant: 'caption' },
              { id: 'int-mon-text', component: 'Text', text: 'FBG daily · Post-prandial 2x/week · Log in patient portal' },

              { id: 'follow-up-card', component: 'Card', child: 'fu-col' },
              { id: 'fu-col', component: 'Column', children: ['fu-title', 'fu-1', 'fu-2', 'fu-3'] },
              { id: 'fu-title', component: 'Text', text: 'Follow-Up Schedule', variant: 'h3' },
              { id: 'fu-1', component: 'Row', children: ['fu-1-date', 'fu-1-desc'] },
              { id: 'fu-1-date', component: 'Badge', text: 'Mar 8' },
              { id: 'fu-1-desc', component: 'Text', text: 'Lab draw: HbA1c, BMP, lipid panel' },
              { id: 'fu-2', component: 'Row', children: ['fu-2-date', 'fu-2-desc'] },
              { id: 'fu-2-date', component: 'Badge', text: 'Mar 15' },
              { id: 'fu-2-desc', component: 'Text', text: 'Office visit: review labs, med adjustment' },
              { id: 'fu-3', component: 'Row', children: ['fu-3-date', 'fu-3-desc'] },
              { id: 'fu-3-date', component: 'Badge', text: 'Apr 12' },
              { id: 'fu-3-desc', component: 'Text', text: 'Dietitian follow-up' },
              { id: 'divider-2', component: 'Divider' },

              { id: 'team-card', component: 'Card', child: 'team-col' },
              { id: 'team-col', component: 'Column', children: ['team-title', 'team-pcp', 'team-endo', 'team-diet'] },
              { id: 'team-title', component: 'Text', text: 'Care Team', variant: 'h3' },
              { id: 'team-pcp', component: 'Text', text: 'PCP: Dr. Sarah Miller, MD — Internal Medicine' },
              { id: 'team-endo', component: 'Text', text: 'Endocrinology: Dr. James Chen, MD' },
              { id: 'team-diet', component: 'Text', text: 'Dietitian: Angela Torres, RD' },

              { id: 'actions', component: 'Row', children: ['update-btn', 'share-btn', 'print-btn'] },
              { id: 'update-btn', component: 'Button', text: 'Update Plan', variant: 'primary', action: { event: { name: 'update_care_plan' } } },
              { id: 'share-btn', component: 'Button', text: 'Share with Patient', action: { event: { name: 'share_care_plan' } } },
              { id: 'print-btn', component: 'Button', text: 'Print', action: { event: { name: 'print_care_plan' } } },
            ],
          },
        },

        // ── Travel: Concierge Chat ──

        'preset-concierge': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'room-badge', 'divider-1', 'messages', 'divider-2', 'quick-actions', 'input-row'] },

              { id: 'header', component: 'Text', text: 'Concierge', variant: 'h2' },
              { id: 'room-badge', component: 'Badge', text: 'Room 412 · Grand Marina Resort' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'messages', component: 'Column', children: ['msg-1', 'msg-2', 'msg-3', 'msg-4'] },
              { id: 'msg-1', component: 'Card', child: 'msg-1-col' },
              { id: 'msg-1-col', component: 'Column', children: ['msg-1-sender', 'msg-1-text'] },
              { id: 'msg-1-sender', component: 'Text', text: 'Concierge · 09:15', variant: 'caption' },
              { id: 'msg-1-text', component: 'Text', text: 'Good morning! Welcome to Grand Marina Resort. How can I help you today?' },
              { id: 'msg-2', component: 'Card', child: 'msg-2-col' },
              { id: 'msg-2-col', component: 'Column', children: ['msg-2-sender', 'msg-2-text'] },
              { id: 'msg-2-sender', component: 'Text', text: 'You · 09:20', variant: 'caption' },
              { id: 'msg-2-text', component: 'Text', text: 'Hi! We\'d like to arrange a sunset sailing tour for tomorrow. Is that possible?' },
              { id: 'msg-3', component: 'Card', child: 'msg-3-col' },
              { id: 'msg-3-col', component: 'Column', children: ['msg-3-sender', 'msg-3-text'] },
              { id: 'msg-3-sender', component: 'Text', text: 'Concierge · 09:22', variant: 'caption' },
              { id: 'msg-3-text', component: 'Text', text: 'Absolutely! We have two options available for tomorrow evening:' },
              { id: 'msg-4', component: 'Column', children: ['option-1', 'option-2'] },
              { id: 'option-1', component: 'Card', child: 'opt-1-col' },
              { id: 'opt-1-col', component: 'Column', children: ['opt-1-name', 'opt-1-detail', 'opt-1-btn'] },
              { id: 'opt-1-name', component: 'Text', text: 'Sunset Catamaran Cruise', variant: 'h4' },
              { id: 'opt-1-detail', component: 'Text', text: '17:30–19:30 · Includes drinks & canapés · €85/person', variant: 'caption' },
              { id: 'opt-1-btn', component: 'Button', text: 'Book Catamaran', variant: 'primary', action: { event: { name: 'book_catamaran' } } },
              { id: 'option-2', component: 'Card', child: 'opt-2-col' },
              { id: 'opt-2-col', component: 'Column', children: ['opt-2-name', 'opt-2-detail', 'opt-2-btn'] },
              { id: 'opt-2-name', component: 'Text', text: 'Private Yacht Charter', variant: 'h4' },
              { id: 'opt-2-detail', component: 'Text', text: '17:00–20:00 · Private crew, dinner, champagne · €450 (up to 6 guests)', variant: 'caption' },
              { id: 'opt-2-btn', component: 'Button', text: 'Book Yacht', variant: 'primary', action: { event: { name: 'book_yacht' } } },
              { id: 'divider-2', component: 'Divider' },

              { id: 'quick-actions', component: 'Row', children: ['qa-transport', 'qa-dining', 'qa-tours', 'qa-tickets'] },
              { id: 'qa-transport', component: 'Button', text: 'Transport', action: { event: { name: 'concierge_transport' } } },
              { id: 'qa-dining', component: 'Button', text: 'Dining', action: { event: { name: 'concierge_dining' } } },
              { id: 'qa-tours', component: 'Button', text: 'Tours', action: { event: { name: 'concierge_tours' } } },
              { id: 'qa-tickets', component: 'Button', text: 'Tickets', action: { event: { name: 'concierge_tickets' } } },

              { id: 'input-row', component: 'Row', children: ['msg-input', 'send-msg-btn'] },
              { id: 'msg-input', component: 'TextField', placeholder: 'Type a message...' },
              { id: 'send-msg-btn', component: 'Button', text: 'Send', variant: 'primary', action: { event: { name: 'send_concierge_msg' } } },
            ],
          },
        },

        // ── Travel: Express Checkout ──

        'preset-checkout': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'room-row', 'divider-1', 'charges-card', 'divider-2', 'payment-card', 'feedback-card', 'divider-3', 'checkout-btn'] },

              { id: 'header', component: 'Text', text: 'Express Checkout', variant: 'h2' },
              { id: 'room-row', component: 'Row', children: ['room-num', 'stay-dates'] },
              { id: 'room-num', component: 'Badge', text: 'Room 412 — Junior Suite' },
              { id: 'stay-dates', component: 'Text', text: 'Feb 18–22, 2026 (4 nights)' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'charges-card', component: 'Card', child: 'charges-col' },
              { id: 'charges-col', component: 'Column', children: ['charges-title', 'charge-room', 'charge-spa', 'charge-dining', 'charge-minibar', 'charge-parking', 'charge-line', 'charge-tax', 'charge-total-line', 'charge-total'] },
              { id: 'charges-title', component: 'Text', text: 'Folio Summary', variant: 'h3' },
              { id: 'charge-room', component: 'Row', children: ['charge-room-l', 'charge-room-v'] },
              { id: 'charge-room-l', component: 'Text', text: 'Room (4 nights × €295)' },
              { id: 'charge-room-v', component: 'Text', text: '€1,180' },
              { id: 'charge-spa', component: 'Row', children: ['charge-spa-l', 'charge-spa-v'] },
              { id: 'charge-spa-l', component: 'Text', text: 'Spa — Deep Tissue Massage' },
              { id: 'charge-spa-v', component: 'Text', text: '€120' },
              { id: 'charge-dining', component: 'Row', children: ['charge-dining-l', 'charge-dining-v'] },
              { id: 'charge-dining-l', component: 'Text', text: 'Restaurant — 3 meals' },
              { id: 'charge-dining-v', component: 'Text', text: '€187' },
              { id: 'charge-minibar', component: 'Row', children: ['charge-minibar-l', 'charge-minibar-v'] },
              { id: 'charge-minibar-l', component: 'Text', text: 'Minibar' },
              { id: 'charge-minibar-v', component: 'Text', text: '€42' },
              { id: 'charge-parking', component: 'Row', children: ['charge-parking-l', 'charge-parking-v'] },
              { id: 'charge-parking-l', component: 'Text', text: 'Valet parking (4 days)' },
              { id: 'charge-parking-v', component: 'Text', text: '€140' },
              { id: 'charge-line', component: 'Divider' },
              { id: 'charge-tax', component: 'Row', children: ['charge-tax-l', 'charge-tax-v'] },
              { id: 'charge-tax-l', component: 'Text', text: 'Taxes & resort fee' },
              { id: 'charge-tax-v', component: 'Text', text: '€201' },
              { id: 'charge-total-line', component: 'Divider' },
              { id: 'charge-total', component: 'Row', children: ['charge-total-l', 'charge-total-v'] },
              { id: 'charge-total-l', component: 'Text', text: 'Total', variant: 'h3' },
              { id: 'charge-total-v', component: 'Text', text: '€1,870', variant: 'h3' },
              { id: 'divider-2', component: 'Divider' },

              { id: 'payment-card', component: 'Card', child: 'payment-col' },
              { id: 'payment-col', component: 'Column', children: ['payment-title', 'payment-method', 'payment-email'] },
              { id: 'payment-title', component: 'Text', text: 'Payment', variant: 'h3' },
              { id: 'payment-method', component: 'Row', children: ['payment-card-l', 'payment-card-v'] },
              { id: 'payment-card-l', component: 'Text', text: 'Card on file:' },
              { id: 'payment-card-v', component: 'Text', text: 'Visa •••• 4821' },
              { id: 'payment-email', component: 'TextField', label: 'Email receipt to', placeholder: 'your@email.com' },

              { id: 'feedback-card', component: 'Card', child: 'feedback-col' },
              { id: 'feedback-col', component: 'Column', children: ['feedback-title', 'feedback-q'] },
              { id: 'feedback-title', component: 'Text', text: 'How was your stay?', variant: 'h3' },
              { id: 'feedback-q', component: 'TextArea', placeholder: 'We\'d love to hear your feedback...' },
              { id: 'divider-3', component: 'Divider' },

              { id: 'checkout-btn', component: 'Button', text: 'Complete Checkout', variant: 'primary', action: { event: { name: 'complete_checkout' } } },
            ],
          },
        },

        // ── Travel: Local Guide ──

        'preset-local-guide': {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['header', 'subtitle', 'divider-1', 'beach-card', 'culture-card', 'food-card', 'divider-2', 'custom-btn'] },

              { id: 'header', component: 'Text', text: 'Local Guide — Santorini', variant: 'h2' },
              { id: 'subtitle', component: 'Text', text: 'Curated experiences near Grand Marina Resort', variant: 'caption' },
              { id: 'divider-1', component: 'Divider' },

              { id: 'beach-card', component: 'Card', child: 'beach-col' },
              { id: 'beach-col', component: 'Column', children: ['beach-title', 'beach-list'] },
              { id: 'beach-title', component: 'Text', text: 'Beaches & Nature', variant: 'h3' },
              { id: 'beach-list', component: 'Column', children: ['beach-1', 'beach-2', 'beach-3'] },
              { id: 'beach-1', component: 'Row', children: ['b1-col', 'b1-btn'] },
              { id: 'b1-col', component: 'Column', children: ['b1-name', 'b1-desc'] },
              { id: 'b1-name', component: 'Text', text: 'Red Beach' },
              { id: 'b1-desc', component: 'Text', text: '15 min drive · Dramatic volcanic cliffs · Best before noon', variant: 'caption' },
              { id: 'b1-btn', component: 'Button', text: 'Directions', action: { event: { name: 'directions_red_beach' } } },
              { id: 'beach-2', component: 'Row', children: ['b2-col', 'b2-btn'] },
              { id: 'b2-col', component: 'Column', children: ['b2-name', 'b2-desc'] },
              { id: 'b2-name', component: 'Text', text: 'Perissa Black Sand Beach' },
              { id: 'b2-desc', component: 'Text', text: '20 min drive · Beach bars, water sports · All-day destination', variant: 'caption' },
              { id: 'b2-btn', component: 'Button', text: 'Directions', action: { event: { name: 'directions_perissa' } } },
              { id: 'beach-3', component: 'Row', children: ['b3-col', 'b3-btn'] },
              { id: 'b3-col', component: 'Column', children: ['b3-name', 'b3-desc'] },
              { id: 'b3-name', component: 'Text', text: 'Fira to Oia Hiking Trail' },
              { id: 'b3-desc', component: 'Text', text: '10 km, ~3 hours · Caldera views · Start early to avoid heat', variant: 'caption' },
              { id: 'b3-btn', component: 'Button', text: 'Details', action: { event: { name: 'trail_details' } } },

              { id: 'culture-card', component: 'Card', child: 'culture-col' },
              { id: 'culture-col', component: 'Column', children: ['culture-title', 'culture-list'] },
              { id: 'culture-title', component: 'Text', text: 'Culture & History', variant: 'h3' },
              { id: 'culture-list', component: 'Column', children: ['cult-1', 'cult-2'] },
              { id: 'cult-1', component: 'Row', children: ['c1-col', 'c1-btn'] },
              { id: 'c1-col', component: 'Column', children: ['c1-name', 'c1-desc'] },
              { id: 'c1-name', component: 'Text', text: 'Akrotiri Archaeological Site' },
              { id: 'c1-desc', component: 'Text', text: 'Minoan Bronze Age settlement · "Pompeii of the Aegean" · €12 entry', variant: 'caption' },
              { id: 'c1-btn', component: 'Button', text: 'Book Tickets', action: { event: { name: 'book_akrotiri' } } },
              { id: 'cult-2', component: 'Row', children: ['c2-col', 'c2-btn'] },
              { id: 'c2-col', component: 'Column', children: ['c2-name', 'c2-desc'] },
              { id: 'c2-name', component: 'Text', text: 'Wine Tasting Tour' },
              { id: 'c2-desc', component: 'Text', text: '3 vineyards · Assyrtiko & Vinsanto · Hotel pickup included · €75/person', variant: 'caption' },
              { id: 'c2-btn', component: 'Button', text: 'Book Tour', action: { event: { name: 'book_wine_tour' } } },

              { id: 'food-card', component: 'Card', child: 'food-col' },
              { id: 'food-col', component: 'Column', children: ['food-title', 'food-list'] },
              { id: 'food-title', component: 'Text', text: 'Dining Beyond the Hotel', variant: 'h3' },
              { id: 'food-list', component: 'Column', children: ['food-1', 'food-2'] },
              { id: 'food-1', component: 'Row', children: ['f1-col', 'f1-btn'] },
              { id: 'f1-col', component: 'Column', children: ['f1-name', 'f1-desc'] },
              { id: 'f1-name', component: 'Text', text: 'Ammoudi Fish Taverna' },
              { id: 'f1-desc', component: 'Text', text: 'Below Oia castle · Fresh catch · Book 2+ days ahead · €€€', variant: 'caption' },
              { id: 'f1-btn', component: 'Button', text: 'Reserve', action: { event: { name: 'reserve_ammoudi' } } },
              { id: 'food-2', component: 'Row', children: ['f2-col', 'f2-btn'] },
              { id: 'f2-col', component: 'Column', children: ['f2-name', 'f2-desc'] },
              { id: 'f2-name', component: 'Text', text: 'Metaxy Mas' },
              { id: 'f2-desc', component: 'Text', text: 'Exo Gonia village · Local Cretan cuisine · Reservation essential · €€', variant: 'caption' },
              { id: 'f2-btn', component: 'Button', text: 'Reserve', action: { event: { name: 'reserve_metaxy' } } },
              { id: 'divider-2', component: 'Divider' },

              { id: 'custom-btn', component: 'Button', text: 'Ask Concierge for Custom Itinerary', variant: 'primary', action: { event: { name: 'custom_itinerary' } } },
            ],
          },
        },
      };

      // Wire preset buttons
      for (const [id, msg] of Object.entries(PRESETS)) {
        document.getElementById(id)?.addEventListener('ui-press', () => {
          // Clear all surfaces
          for (const sid of adapter.getSurfaceIds()) {
            adapter.receive({ deleteSurface: { surfaceId: sid } });
          }
          chatContent.innerHTML = '';

          messageInput.value = JSON.stringify(msg, null, 2);
          log(`RECEIVE: updateComponents (${id.replace('preset-', '')})`, 'cmd');
          adapter.receive(msg, chatContent);
          surfaceCountEl.textContent = adapter.getSurfaceIds().length;

          // For data binding preset, send initial data
          if (id === 'preset-data') {
            const dataMsg = {
              updateDataModel: {
                surfaceId: 'demo',
                value: { greeting: 'Hello, World!', counter: 'Count: 0' },
              },
            };
            adapter.receive(dataMsg);
            log('DATA: Initial data model set', 'data');

            // Wire increment action
            let count = 0;
            kernel.bus.on('a2ui:demo:inc-btn:increment', () => {
              count++;
              adapter.receive({
                updateDataModel: {
                  surfaceId: 'demo',
                  path: '/counter',
                  value: `Count: ${count}`,
                },
              });
              log(`DATA: counter → ${count}`, 'data');
            });
          }

          // Live form — wire input events to data model updates
          if (id === 'preset-live-form') {
            adapter.receive({
              updateDataModel: {
                surfaceId: 'demo',
                value: { name: '—', role: '—', bio: '—' },
              },
            });
            log('DATA: Initial live-form data model set', 'data');

            chatContent.addEventListener('ui-input', (e) => {
              const target = e.target;
              const label = target.getAttribute('aria-label') ?? target.getAttribute('placeholder') ?? '';
              let path = '';
              if (label.includes('name')) path = '/name';
              else if (label.includes('Role') || label.includes('Engineer')) path = '/role';
              else if (label.includes('Bio') || label.includes('yourself')) path = '/bio';
              if (!path) return;

              const val = target.value || '—';
              adapter.receive({
                updateDataModel: { surfaceId: 'demo', path, value: val },
              });
              log(`DATA: ${path} → "${val}"`, 'data');
            });
          }
        });
      }

      // ── Streaming Preset ──

      document.getElementById('preset-streaming')?.addEventListener('ui-press', () => {
        adapter.receive({ deleteSurface: { surfaceId: 'demo' } });
        chatContent.innerHTML = '';
        messageInput.value = '';
        log('STREAMING: Starting incremental delivery...', 'cmd');

        // Phase 1: skeleton
        const phase1 = {
          updateComponents: {
            surfaceId: 'demo',
            components: [
              { id: 'root', component: 'Column', children: ['heading', 'status'] },
              { id: 'heading', component: 'Text', text: 'Streaming Demo', variant: 'h2' },
              { id: 'status', component: 'Badge', text: 'Loading...' },
            ],
          },
        };
        adapter.receive(phase1, chatContent);
        surfaceCountEl.textContent = adapter.getSurfaceIds().length;
        log('STREAMING: Phase 1 — skeleton', 'cmd');

        // Phase 2: add content after 800ms
        setTimeout(() => {
          const phase2 = {
            updateComponents: {
              surfaceId: 'demo',
              components: [
                { id: 'root', component: 'Column', children: ['heading', 'status', 'divider', 'card-1', 'card-2'] },
                { id: 'heading', component: 'Text', text: 'Streaming Demo', variant: 'h2' },
                { id: 'status', component: 'Badge', text: 'Partially loaded' },
                { id: 'divider', component: 'Divider' },
                { id: 'card-1', component: 'Card', child: 'card-1-col' },
                { id: 'card-1-col', component: 'Column', children: ['c1-title', 'c1-text'] },
                { id: 'c1-title', component: 'Text', text: 'First Result', variant: 'h3' },
                { id: 'c1-text', component: 'Text', text: 'This card arrived in the second batch of components.' },
                { id: 'card-2', component: 'Card', child: 'card-2-col' },
                { id: 'card-2-col', component: 'Column', children: ['c2-title', 'c2-text'] },
                { id: 'c2-title', component: 'Text', text: 'Second Result', variant: 'h3' },
                { id: 'c2-text', component: 'Text', text: 'Streamed alongside the first result.' },
              ],
            },
          };
          adapter.receive(phase2, chatContent);
          log('STREAMING: Phase 2 — content cards', 'cmd');
        }, 800);

        // Phase 3: final update after 1600ms
        setTimeout(() => {
          const phase3 = {
            updateComponents: {
              surfaceId: 'demo',
              components: [
                { id: 'root', component: 'Column', children: ['heading', 'status', 'divider', 'card-1', 'card-2', 'card-3', 'divider-2', 'actions'] },
                { id: 'heading', component: 'Text', text: 'Streaming Demo', variant: 'h2' },
                { id: 'status', component: 'Badge', text: 'Complete' },
                { id: 'divider', component: 'Divider' },
                { id: 'card-1', component: 'Card', child: 'card-1-col' },
                { id: 'card-1-col', component: 'Column', children: ['c1-title', 'c1-text'] },
                { id: 'c1-title', component: 'Text', text: 'First Result', variant: 'h3' },
                { id: 'c1-text', component: 'Text', text: 'This card arrived in the second batch of components.' },
                { id: 'card-2', component: 'Card', child: 'card-2-col' },
                { id: 'card-2-col', component: 'Column', children: ['c2-title', 'c2-text'] },
                { id: 'c2-title', component: 'Text', text: 'Second Result', variant: 'h3' },
                { id: 'c2-text', component: 'Text', text: 'Streamed alongside the first result.' },
                { id: 'card-3', component: 'Card', child: 'card-3-col' },
                { id: 'card-3-col', component: 'Column', children: ['c3-title', 'c3-text'] },
                { id: 'c3-title', component: 'Text', text: 'Third Result', variant: 'h3' },
                { id: 'c3-text', component: 'Text', text: 'Final card — stream complete.' },
                { id: 'divider-2', component: 'Divider' },
                { id: 'actions', component: 'Row', children: ['refresh-btn'] },
                { id: 'refresh-btn', component: 'Button', text: 'Refresh Results', variant: 'primary', action: { event: { name: 'refresh' } } },
              ],
            },
          };
          adapter.receive(phase3, chatContent);
          log('STREAMING: Phase 3 — complete', 'cmd');
        }, 1600);
      });

      // ── Multi-Surface Preset ──

      document.getElementById('preset-multi-surface')?.addEventListener('ui-press', () => {
        adapter.receive({ deleteSurface: { surfaceId: 'demo' } });
        adapter.receive({ deleteSurface: { surfaceId: 'surface-a' } });
        adapter.receive({ deleteSurface: { surfaceId: 'surface-b' } });
        chatContent.innerHTML = '';
        messageInput.value = '';

        // Create two stacked containers inside chat content
        const containerA = document.createElement('div');
        const containerB = document.createElement('div');

        // Surface A: note-taking
        const surfaceA = {
          updateComponents: {
            surfaceId: 'surface-a',
            components: [
              { id: 'root', component: 'Column', children: ['title', 'badge', 'note-input', 'save-btn'] },
              { id: 'title', component: 'Text', text: 'Notes', variant: 'h3' },
              { id: 'badge', component: 'Badge', text: 'Surface A' },
              { id: 'note-input', component: 'TextArea', placeholder: 'Write a note...' },
              { id: 'save-btn', component: 'Button', text: 'Save Note', variant: 'primary', action: { event: { name: 'save_note' } } },
            ],
          },
        };

        // Surface B: task list
        const surfaceB = {
          updateComponents: {
            surfaceId: 'surface-b',
            components: [
              { id: 'root', component: 'Column', children: ['title', 'badge', 'task-list', 'add-btn'] },
              { id: 'title', component: 'Text', text: 'Tasks', variant: 'h3' },
              { id: 'badge', component: 'Badge', text: 'Surface B' },
              { id: 'task-list', component: 'List', children: ['t1', 't2', 't3'] },
              { id: 't1', component: 'ListItem', text: 'Review pull requests', value: 'pr' },
              { id: 't2', component: 'ListItem', text: 'Write documentation', value: 'docs' },
              { id: 't3', component: 'ListItem', text: 'Deploy to staging', value: 'deploy' },
              { id: 'add-btn', component: 'Button', text: 'Add Task', action: { event: { name: 'add_task' } } },
            ],
          },
        };

        chatContent.appendChild(containerA);
        chatContent.appendChild(containerB);
        chatPanel.setAttribute('open', '');
        adapter.receive(surfaceA, containerA);
        adapter.receive(surfaceB, containerB);
        surfaceCountEl.textContent = adapter.getSurfaceIds().length;
        log('MULTI: Created surfaces A (notes) and B (tasks)', 'cmd');
      });

      // Clear button
      document.getElementById('preset-clear').addEventListener('ui-press', () => {
        for (const sid of adapter.getSurfaceIds()) {
          adapter.receive({ deleteSurface: { surfaceId: sid } });
        }
        chatContent.innerHTML = '';
        chatPanel.removeAttribute('open');
        messageInput.value = '';
        surfaceCountEl.textContent = '0';
        log('Surface cleared', '');
      });

      // ── Emit ──

      document.getElementById('emit-form').addEventListener('ui-press', () => {
        const result = Planner.form(
          [
            { name: 'email', type: 'email', label: 'Email' },
            { name: 'password', type: 'password', label: 'Password' },
          ],
          { title: 'Login', submitLabel: 'Sign In', submitCommand: 'auth.login' },
        );
        const msg = adapter.emitPlanResult(result, 'login-surface');
        emitOutput.textContent = JSON.stringify(msg, null, 2);
        log('EMIT: Planner.form() → A2UI updateComponents', 'cmd');
      });

      document.getElementById('emit-actions').addEventListener('ui-press', () => {
        const result = Planner.actions(
          [
            { label: 'Save', command: 'doc.save', variant: 'primary' },
            { label: 'Discard', command: 'doc.discard' },
            { label: 'Preview', command: 'doc.preview' },
          ],
        );
        const msg = adapter.emitPlanResult(result, 'actions-surface');
        emitOutput.textContent = JSON.stringify(msg, null, 2);
        log('EMIT: Planner.actions() → A2UI updateComponents', 'cmd');
      });

      document.getElementById('emit-card').addEventListener('ui-press', () => {
        const result = Planner.card({
          heading: 'Welcome Back',
          body: 'You have 3 unread notifications and 2 pending tasks.',
          footer: [
            { label: 'View All', command: 'nav.notifications', variant: 'primary' },
            { label: 'Dismiss', command: 'dismiss' },
          ],
        });
        const msg = adapter.emitPlanResult(result, 'card-surface');
        emitOutput.textContent = JSON.stringify(msg, null, 2);
        log('EMIT: Planner.card() → A2UI updateComponents', 'cmd');
      });
    </script>
  </body>
</html>
